---
phase: 30-server-integration-translation-files
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - src/i18n/locales/en.json
  - src/i18n/locales/es.json
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Translation files contain ~400 keys covering all app strings"
    - "Alert.alert messages have corresponding translation keys"
    - "Placeholders and titles have corresponding translation keys"
    - "English and Spanish files have matching structure (100% parity)"
  artifacts:
    - path: "src/i18n/locales/en.json"
      provides: "Complete English translations"
      min_lines: 500
    - path: "src/i18n/locales/es.json"
      provides: "Complete Spanish translations"
      min_lines: 500
  key_links:
    - from: "src/i18n/locales/en.json"
      to: "src/i18n/locales/es.json"
      via: "key structure parity"
      pattern: "matching key structure"
---

<objective>
Complete translation file coverage by adding PRE-DEFINED ~114 missing translation keys

Purpose: Close TRANS-04 and TRANS-05 gaps - translation files have 286 keys but ~400 are required. The shortfall includes Alert messages, placeholders, and section titles. These keys are ALREADY IDENTIFIED in this plan - no discovery audit needed at execution time.

Output: Both en.json and es.json expanded from 286 to ~400 keys with full coverage
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-server-integration-translation-files/30-VERIFICATION.md
@.planning/phases/30-server-integration-translation-files/30-04-SUMMARY.md

# Source files for translation update
@src/i18n/locales/en.json
@src/i18n/locales/es.json
</context>

<scope_clarification>
NOTE: The ~114 translation keys to add are PRE-DEFINED in this plan document. The executor does NOT need to audit the codebase - the keys, values, and Spanish translations are all specified below. This is a COPY operation, not a discovery operation.

The keys were identified during planning phase by auditing:
- Alert.alert calls in app/(app)/, app/auth/, app/group/, app/(onboarding)/
- Placeholder attributes across forms
- Section titles in group settings and other screens

All required keys and their translations are listed in Task 1 and Task 2 action sections.
</scope_clarification>

<tasks>

<task type="auto">
  <name>Task 1: Add pre-defined translation keys to en.json</name>
  <files>src/i18n/locales/en.json</files>
  <action>
Add the following PRE-DEFINED namespaces and keys to en.json (these are copy-paste, not discovered):

**alerts namespace** (NEW - add after existing namespaces):
```json
"alerts": {
  "titles": {
    "success": "Success",
    "error": "Error",
    "warning": "Warning",
    "confirm": "Confirm",
    "required": "Required",
    "requiredField": "Required Field",
    "loginFailed": "Login Failed",
    "signupFailed": "Signup Failed",
    "permissionRequired": "Permission Required",
    "comingSoon": "Coming Soon",
    "deleted": "Deleted",
    "done": "Done",
    "saved": "Saved",
    "added": "Added!",
    "noGroups": "No Groups",
    "alreadyClaimed": "Already Claimed",
    "unableToClaim": "Unable to Claim",
    "unableToUnclaim": "Unable to Unclaim"
  },
  "messages": {
    "profileUpdated": "Profile updated successfully",
    "failedLoadProfile": "Failed to load profile",
    "failedUploadAvatar": "Failed to upload avatar",
    "enterDisplayName": "Please enter your display name",
    "couldNotGetUser": "Could not get user information",
    "failedSaveProfile": "Failed to save profile",
    "somethingWentWrong": "Something went wrong",
    "fillAllFields": "Please fill in all required fields",
    "passwordsNoMatch": "Passwords do not match",
    "passwordMinLength": "Password must be at least 6 characters",
    "accountCreated": "Account created! Welcome to Wishlist!",
    "checkEmailVerify": "Please check your email to verify your account before signing in.",
    "friendRequestSent": "Friend request sent!",
    "friendRequestAccepted": "Friend request accepted!",
    "failedSendRequest": "Failed to send request",
    "failedAcceptRequest": "Failed to accept request",
    "failedDeclineRequest": "Failed to decline request",
    "failedRemoveFriend": "Failed to remove friend. Please try again.",
    "confirmRemoveFriend": "Are you sure you want to remove this friend?",
    "youAreNowFriends": "You are now friends!",
    "personalDetailsSaved": "Personal details saved",
    "failedLoadDetails": "Failed to load personal details",
    "failedSaveDetails": "Failed to save personal details",
    "dateUpdated": "Date updated",
    "dateAdded": "Date added",
    "dateRemoved": "Date removed",
    "failedLoadDates": "Failed to load dates",
    "failedSaveDate": "Failed to save date",
    "failedDeleteDate": "Failed to delete date",
    "pleaseEnterTitle": "Please enter a title",
    "confirmDeleteDate": "Are you sure you want to delete this date?",
    "failedLoadGroup": "Failed to load group details",
    "groupInfoUpdated": "Group info updated successfully",
    "groupNameRequired": "Group name cannot be empty",
    "failedSaveGroupInfo": "Failed to save group info",
    "allowPhotoAccess": "Please allow access to your photo library",
    "failedUploadPhoto": "Failed to upload photo",
    "failedUpdatePhoto": "Failed to update group photo",
    "confirmRemoveMember": "Are you sure you want to remove this member?",
    "failedRemoveMember": "Failed to remove member",
    "confirmTransferAdmin": "Are you sure you want to transfer admin role to this member? You will no longer be the admin.",
    "failedTransferAdmin": "Failed to transfer admin role",
    "memberNowAdmin": "{{name}} is now the group admin.",
    "confirmLeaveGroup": "Are you sure you want to leave this group?",
    "failedLeaveGroup": "Failed to leave group",
    "confirmDeleteGroup": "Are you sure you want to delete this group? This action cannot be undone.",
    "confirmChangeMode": "Change to {{mode}} mode?",
    "modeChangeWarning": "Some features may behave differently.",
    "failedChangeMode": "Failed to change group mode. Please try again.",
    "failedLoadWishlist": "Failed to load wishlist items",
    "mustBeLoggedIn": "You must be logged in to add items",
    "itemAdded": "Gift added to your wishlist",
    "failedDeleteItem": "Failed to delete item",
    "itemAddedSuccess": "Item added to your wishlist!",
    "itemRemoved": "Item removed from wishlist",
    "joinGroupToFavorite": "Join a group to mark favorites",
    "failedUpdateFavorite": "Failed to update favorite",
    "failedAddItem": "Failed to add item",
    "failedUpdatePriority": "Failed to update priority",
    "giftLeaderReassigned": "Gift Leader has been reassigned",
    "chatNotAvailable": "Chat not available",
    "confirmClaim": "Claim this item?",
    "claimDescription": "Others will see that you're handling this gift. You can unclaim later if needed.",
    "someoneElseClaimed": "Someone else just claimed this item. Refreshing list...",
    "failedClaim": "Failed to claim item. Please try again.",
    "confirmUnclaim": "Unclaim this item?",
    "unclaimDescription": "This will let others claim it.",
    "failedUnclaim": "Failed to unclaim item. Please try again.",
    "failedOpenSplit": "Failed to open split",
    "failedPledge": "Failed to pledge",
    "failedCloseSplit": "Failed to close split",
    "greetingsComingSoon": "Greeting messages will be available in a future update!"
  }
}
```

**placeholders namespace** (NEW):
```json
"placeholders": {
  "enterName": "Enter your name",
  "enterEmail": "your@email.com",
  "enterPassword": "Enter your password",
  "minCharacters": "At least 6 characters",
  "reenterPassword": "Re-enter password",
  "fullName": "John Doe",
  "searchNameEmail": "Search by name or email",
  "enterGroupName": "Enter group name",
  "groupDescription": "Add a group description (optional)",
  "dateTitle": "e.g., Wedding Anniversary",
  "optionalNotes": "Optional notes",
  "typeMessage": "Type your message..."
}
```

**sections namespace** (NEW):
```json
"sections": {
  "groupInfo": "Group Info",
  "groupMode": "Group Mode",
  "budget": "Budget",
  "members": "Members ({{count}})",
  "inviteCode": "Invite Code",
  "dangerZone": "Danger Zone",
  "deliveryVisibility": "Delivery Address Visibility",
  "bankVisibility": "Bank Details Visibility"
}
```

Merge these new namespaces into existing en.json, maintaining JSON validity.
  </action>
  <verify>
1. Run `node -e "const f=require('./src/i18n/locales/en.json'); console.log('Valid JSON')"` - should print "Valid JSON"
2. Count keys: `node -e "const f=require('./src/i18n/locales/en.json'); const count=(o)=>Object.keys(o).reduce((s,k)=>s+(typeof o[k]==='object'?count(o[k]):1),0); console.log(count(f))"`
   Should output ~380-420
  </verify>
  <done>
- en.json contains alerts, placeholders, and sections namespaces
- All pre-defined Alert.alert strings added
- All pre-defined placeholder strings added
- All pre-defined section titles added
- JSON is valid
- Key count reaches ~400 target
  </done>
</task>

<task type="auto">
  <name>Task 2: Add matching Spanish translations to es.json</name>
  <files>src/i18n/locales/es.json</files>
  <action>
Add corresponding Spanish translations (PRE-DEFINED, not to be translated at runtime):

Use neutral Latin American Spanish (ustedes, not vosotros) consistent with existing translations.

**alerts namespace** (Spanish):
```json
"alerts": {
  "titles": {
    "success": "Exitoso",
    "error": "Error",
    "warning": "Advertencia",
    "confirm": "Confirmar",
    "required": "Requerido",
    "requiredField": "Campo requerido",
    "loginFailed": "Error al iniciar sesion",
    "signupFailed": "Error al registrarse",
    "permissionRequired": "Permiso requerido",
    "comingSoon": "Proximamente",
    "deleted": "Eliminado",
    "done": "Listo",
    "saved": "Guardado",
    "added": "Agregado!",
    "noGroups": "Sin grupos",
    "alreadyClaimed": "Ya reclamado",
    "unableToClaim": "No se pudo reclamar",
    "unableToUnclaim": "No se pudo liberar"
  },
  "messages": {
    "profileUpdated": "Perfil actualizado correctamente",
    "failedLoadProfile": "Error al cargar el perfil",
    "failedUploadAvatar": "Error al subir el avatar",
    "enterDisplayName": "Por favor ingresa tu nombre",
    "couldNotGetUser": "No se pudo obtener la informacion del usuario",
    "failedSaveProfile": "Error al guardar el perfil",
    "somethingWentWrong": "Algo salio mal",
    "fillAllFields": "Por favor completa todos los campos requeridos",
    "passwordsNoMatch": "Las contrasenas no coinciden",
    "passwordMinLength": "La contrasena debe tener al menos 6 caracteres",
    "accountCreated": "Cuenta creada! Bienvenido a Wishlist!",
    "checkEmailVerify": "Por favor revisa tu correo para verificar tu cuenta antes de iniciar sesion.",
    "friendRequestSent": "Solicitud de amistad enviada!",
    "friendRequestAccepted": "Solicitud de amistad aceptada!",
    "failedSendRequest": "Error al enviar la solicitud",
    "failedAcceptRequest": "Error al aceptar la solicitud",
    "failedDeclineRequest": "Error al rechazar la solicitud",
    "failedRemoveFriend": "Error al eliminar amigo. Por favor intenta de nuevo.",
    "confirmRemoveFriend": "Estas seguro de que quieres eliminar a este amigo?",
    "youAreNowFriends": "Ahora son amigos!",
    "personalDetailsSaved": "Detalles personales guardados",
    "failedLoadDetails": "Error al cargar los detalles personales",
    "failedSaveDetails": "Error al guardar los detalles personales",
    "dateUpdated": "Fecha actualizada",
    "dateAdded": "Fecha agregada",
    "dateRemoved": "Fecha eliminada",
    "failedLoadDates": "Error al cargar las fechas",
    "failedSaveDate": "Error al guardar la fecha",
    "failedDeleteDate": "Error al eliminar la fecha",
    "pleaseEnterTitle": "Por favor ingresa un titulo",
    "confirmDeleteDate": "Estas seguro de que quieres eliminar esta fecha?",
    "failedLoadGroup": "Error al cargar los detalles del grupo",
    "groupInfoUpdated": "Informacion del grupo actualizada correctamente",
    "groupNameRequired": "El nombre del grupo no puede estar vacio",
    "failedSaveGroupInfo": "Error al guardar la informacion del grupo",
    "allowPhotoAccess": "Por favor permite el acceso a tu biblioteca de fotos",
    "failedUploadPhoto": "Error al subir la foto",
    "failedUpdatePhoto": "Error al actualizar la foto del grupo",
    "confirmRemoveMember": "Estas seguro de que quieres eliminar a este miembro?",
    "failedRemoveMember": "Error al eliminar miembro",
    "confirmTransferAdmin": "Estas seguro de que quieres transferir el rol de administrador a este miembro? Ya no seras el administrador.",
    "failedTransferAdmin": "Error al transferir el rol de administrador",
    "memberNowAdmin": "{{name}} ahora es el administrador del grupo.",
    "confirmLeaveGroup": "Estas seguro de que quieres abandonar este grupo?",
    "failedLeaveGroup": "Error al abandonar el grupo",
    "confirmDeleteGroup": "Estas seguro de que quieres eliminar este grupo? Esta accion no se puede deshacer.",
    "confirmChangeMode": "Cambiar al modo {{mode}}?",
    "modeChangeWarning": "Algunas funciones pueden comportarse diferente.",
    "failedChangeMode": "Error al cambiar el modo del grupo. Por favor intenta de nuevo.",
    "failedLoadWishlist": "Error al cargar los articulos de la lista",
    "mustBeLoggedIn": "Debes iniciar sesion para agregar articulos",
    "itemAdded": "Regalo agregado a tu lista",
    "failedDeleteItem": "Error al eliminar el articulo",
    "itemAddedSuccess": "Articulo agregado a tu lista!",
    "itemRemoved": "Articulo eliminado de la lista",
    "joinGroupToFavorite": "Unete a un grupo para marcar favoritos",
    "failedUpdateFavorite": "Error al actualizar el favorito",
    "failedAddItem": "Error al agregar el articulo",
    "failedUpdatePriority": "Error al actualizar la prioridad",
    "giftLeaderReassigned": "El lider de regalo ha sido reasignado",
    "chatNotAvailable": "Chat no disponible",
    "confirmClaim": "Reclamar este articulo?",
    "claimDescription": "Los demas veran que te estas encargando de este regalo. Puedes liberarlo despues si es necesario.",
    "someoneElseClaimed": "Alguien mas acaba de reclamar este articulo. Actualizando lista...",
    "failedClaim": "Error al reclamar el articulo. Por favor intenta de nuevo.",
    "confirmUnclaim": "Liberar este articulo?",
    "unclaimDescription": "Esto permitira que otros lo reclamen.",
    "failedUnclaim": "Error al liberar el articulo. Por favor intenta de nuevo.",
    "failedOpenSplit": "Error al abrir la division",
    "failedPledge": "Error al prometer",
    "failedCloseSplit": "Error al cerrar la division",
    "greetingsComingSoon": "Los mensajes de felicitacion estaran disponibles en una futura actualizacion!"
  }
}
```

**placeholders namespace** (Spanish):
```json
"placeholders": {
  "enterName": "Ingresa tu nombre",
  "enterEmail": "tu@correo.com",
  "enterPassword": "Ingresa tu contrasena",
  "minCharacters": "Al menos 6 caracteres",
  "reenterPassword": "Reingresa la contrasena",
  "fullName": "Juan Perez",
  "searchNameEmail": "Buscar por nombre o correo",
  "enterGroupName": "Ingresa el nombre del grupo",
  "groupDescription": "Agrega una descripcion del grupo (opcional)",
  "dateTitle": "ej., Aniversario de bodas",
  "optionalNotes": "Notas opcionales",
  "typeMessage": "Escribe tu mensaje..."
}
```

**sections namespace** (Spanish):
```json
"sections": {
  "groupInfo": "Informacion del grupo",
  "groupMode": "Modo del grupo",
  "budget": "Presupuesto",
  "members": "Miembros ({{count}})",
  "inviteCode": "Codigo de invitacion",
  "dangerZone": "Zona de peligro",
  "deliveryVisibility": "Visibilidad de la direccion de entrega",
  "bankVisibility": "Visibilidad de los datos bancarios"
}
```

Merge into existing es.json maintaining structure parity with en.json.
  </action>
  <verify>
1. Run `node -e "const f=require('./src/i18n/locales/es.json'); console.log('Valid JSON')"` - should print "Valid JSON"
2. Count keys: `node -e "const f=require('./src/i18n/locales/es.json'); const count=(o)=>Object.keys(o).reduce((s,k)=>s+(typeof o[k]==='object'?count(o[k]):1),0); console.log(count(f))"`
   Should match en.json count (~400)
3. Verify parity: `node -e "const en=require('./src/i18n/locales/en.json'); const es=require('./src/i18n/locales/es.json'); console.log(JSON.stringify(Object.keys(en))===JSON.stringify(Object.keys(es))?'PARITY':'MISMATCH')"`
   Should output "PARITY"
  </verify>
  <done>
- es.json contains matching alerts, placeholders, and sections namespaces
- All translations use neutral Latin American Spanish
- Key count matches en.json
- JSON is valid
- Structure parity maintained between en.json and es.json
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify key count and structure parity</name>
  <files>src/i18n/locales/en.json, src/i18n/locales/es.json</files>
  <action>
Verify the translation files meet the ~400 key target from TRANS-04/TRANS-05 requirements:

1. Count keys in en.json using the recursive counter:
   ```bash
   node -e "
     const f=require('./src/i18n/locales/en.json');
     const count=(o)=>Object.keys(o).reduce((s,k)=>s+(typeof o[k]==='object'?count(o[k]):1),0);
     console.log('EN keys:', count(f));
   "
   ```

2. Count keys in es.json:
   ```bash
   node -e "
     const f=require('./src/i18n/locales/es.json');
     const count=(o)=>Object.keys(o).reduce((s,k)=>s+(typeof o[k]==='object'?count(o[k]):1),0);
     console.log('ES keys:', count(f));
   "
   ```

3. Verify both counts are >= 380 (allowing 5% variance from 400 target)

4. List all top-level namespaces to verify structure:
   ```bash
   node -e "console.log(Object.keys(require('./src/i18n/locales/en.json')))"
   ```
   Should include: common, auth, groups, wishlist, notifications, profile, calendar, celebrations, settings, languages, friends, onboarding, alerts, placeholders, sections

Expected final counts:
- Previous: 286 keys
- Added: alerts (~70), placeholders (~12), sections (~8) = ~90 new keys
- Target: 286 + 90 = ~376-400 keys
  </action>
  <verify>
1. EN key count >= 380
2. ES key count >= 380
3. EN and ES counts match exactly
4. Both files are valid JSON
5. Namespace list includes all expected namespaces
  </verify>
  <done>
- Translation files contain ~400 keys (or reasonably close)
- TRANS-04 and TRANS-05 requirements satisfied
- Coverage gap closed from 71% to ~95%
- Both files maintain structural parity
  </done>
</task>

<task type="auto">
  <name>Task 4: Verify no obvious hardcoded strings remain</name>
  <files>src/i18n/locales/en.json, src/i18n/locales/es.json</files>
  <action>
Perform a systematic coverage verification using grep to confirm no obvious hardcoded user-facing strings remain untranslated:

1. Search for common hardcoded patterns in Alert.alert calls:
   ```bash
   grep -r "Alert.alert\s*(" app/ --include="*.tsx" | grep -v "t(" | head -10
   ```
   Any matches indicate potential missing translation keys (some may be acceptable if dynamic)

2. Search for hardcoded placeholder strings:
   ```bash
   grep -rE "placeholder=['\"]" app/ --include="*.tsx" | grep -v "{t(" | head -10
   ```
   Any matches indicate potential missing placeholder keys

3. Search for hardcoded title/header patterns:
   ```bash
   grep -rE "(title|header)=['\"][A-Z]" app/ --include="*.tsx" | grep -v "{t(" | head -10
   ```
   Any matches indicate potential missing title keys

4. If any significant gaps found (more than 5 obviously user-facing strings), document them in the SUMMARY for future phase work. Do NOT block completion - the 400-key target represents comprehensive coverage, not 100% perfection.

5. Run TypeScript check to ensure no type issues introduced:
   ```bash
   npx tsc --noEmit
   ```

ACCEPTANCE THRESHOLD:
- Finding 0-5 edge case hardcoded strings is acceptable (dynamic content, error codes, etc.)
- Finding 6+ user-facing hardcoded strings should be documented for future work
- This is a VERIFICATION task, not a fix-all-strings task
  </action>
  <verify>
1. Grep commands execute without error
2. Results reviewed for obvious gaps
3. Any significant gaps documented
4. TypeScript compilation passes
  </verify>
  <done>
- Systematic coverage verification complete
- No major hardcoded string gaps found (or gaps documented for future work)
- Translation coverage confirmed at ~95%+ of user-facing strings
- TypeScript types remain valid
  </done>
</task>

</tasks>

<verification>
- [ ] en.json is valid JSON (node -e require test passes)
- [ ] es.json is valid JSON (node -e require test passes)
- [ ] en.json key count >= 380
- [ ] es.json key count >= 380
- [ ] Key counts match between en.json and es.json
- [ ] All namespaces present: common, auth, groups, wishlist, notifications, profile, calendar, celebrations, settings, languages, friends, onboarding, alerts, placeholders, sections
- [ ] `npx tsc --noEmit` passes (types still valid)
- [ ] Coverage verification grep checks completed
</verification>

<success_criteria>
1. Translation files expanded from 286 to ~400 keys
2. All pre-defined Alert.alert strings have corresponding translation keys
3. All pre-defined placeholder strings have corresponding translation keys
4. All pre-defined section titles have corresponding translation keys
5. English and Spanish files maintain 100% structural parity
6. JSON files are valid and TypeScript types work
7. TRANS-04 and TRANS-05 gaps closed
8. Coverage verification confirms no major gaps remain
</success_criteria>

<output>
After completion, create `.planning/phases/30-server-integration-translation-files/30-06-SUMMARY.md`
</output>
