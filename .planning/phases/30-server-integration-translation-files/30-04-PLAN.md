---
phase: 30-server-integration-translation-files
plan: 04
type: execute
wave: 3
depends_on: ["30-02"]
files_modified:
  - src/i18n/locales/en.json
  - src/i18n/locales/es.json
  - src/i18n/resources.ts
  - src/i18n/types/i18next.d.ts
autonomous: true

must_haves:
  truths:
    - "English translation file contains all ~400 app strings"
    - "Spanish translation file contains all ~400 app strings with matching keys"
    - "Translations are organized by namespace (8 namespaces)"
    - "TypeScript types updated for new namespaces"
  artifacts:
    - path: "src/i18n/locales/en.json"
      provides: "Complete English translations"
      min_lines: 300
    - path: "src/i18n/locales/es.json"
      provides: "Complete Spanish translations"
      min_lines: 300
    - path: "src/i18n/resources.ts"
      provides: "Namespace aggregator"
      contains: "common|auth|groups|wishlist|notifications|profile|calendar|celebrations"
  key_links:
    - from: "src/i18n/resources.ts"
      to: "src/i18n/locales/en.json"
      via: "import"
      pattern: "import.*from.*locales/en"
    - from: "src/i18n/types/i18next.d.ts"
      to: "src/i18n/resources.ts"
      via: "type inference"
      pattern: "typeof resources"
---

<objective>
Create comprehensive English and Spanish translation files covering all ~400 app strings organized by namespace.

Purpose: Implements TRANS-04 (English strings) and TRANS-05 (Spanish strings) by creating complete translation files that Phase 32 will integrate into UI components.

Output: Complete EN and ES translation files with 8 namespaces (common, auth, groups, wishlist, notifications, profile, calendar, celebrations), updated resources.ts and TypeScript declarations.
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/30-server-integration-translation-files/30-RESEARCH.md
@src/i18n/locales/en.json
@src/i18n/locales/es.json
@src/i18n/resources.ts
@src/i18n/types/i18next.d.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create comprehensive English translation file</name>
  <files>src/i18n/locales/en.json</files>
  <action>
Replace the existing minimal en.json with a comprehensive translation file organized by 8 namespaces. Target ~400 keys based on codebase analysis.

**File structure with namespaces:**

```json
{
  "common": {
    "loading": "Loading...",
    "error": "Error",
    "success": "Success",
    "cancel": "Cancel",
    "save": "Save",
    "delete": "Delete",
    "confirm": "Confirm",
    "close": "Close",
    "back": "Back",
    "next": "Next",
    "done": "Done",
    "edit": "Edit",
    "add": "Add",
    "remove": "Remove",
    "retry": "Retry",
    "search": "Search",
    "ok": "OK",
    "yes": "Yes",
    "no": "No",
    "errors": {
      "generic": "Something went wrong",
      "network": "Network error. Please check your connection.",
      "notFound": "Not found",
      "unauthorized": "Please log in to continue"
    },
    "empty": {
      "noResults": "No results found",
      "noData": "No data available"
    },
    "time": {
      "justNow": "Just now",
      "minutesAgo": "{{count}} minute ago",
      "minutesAgo_plural": "{{count}} minutes ago",
      "hoursAgo": "{{count}} hour ago",
      "hoursAgo_plural": "{{count}} hours ago",
      "daysAgo": "{{count}} day ago",
      "daysAgo_plural": "{{count}} days ago",
      "today": "Today",
      "tomorrow": "Tomorrow",
      "yesterday": "Yesterday"
    }
  },
  "auth": {
    "login": "Log In",
    "signup": "Sign Up",
    "logout": "Log Out",
    "email": "Email",
    "password": "Password",
    "confirmPassword": "Confirm Password",
    "forgotPassword": "Forgot Password?",
    "resetPassword": "Reset Password",
    "createAccount": "Create Account",
    "alreadyHaveAccount": "Already have an account?",
    "dontHaveAccount": "Don't have an account?",
    "errors": {
      "invalidEmail": "Please enter a valid email address",
      "passwordTooShort": "Password must be at least 6 characters",
      "passwordsDoNotMatch": "Passwords do not match",
      "invalidCredentials": "Invalid email or password",
      "emailInUse": "This email is already in use"
    }
  },
  "groups": {
    "title": "Groups",
    "myGroups": "My Groups",
    "createGroup": "Create Group",
    "joinGroup": "Join Group",
    "groupName": "Group Name",
    "groupDescription": "Description",
    "groupPhoto": "Group Photo",
    "inviteCode": "Invite Code",
    "copyInviteCode": "Copy Invite Code",
    "codeCopied": "Invite code copied!",
    "enterInviteCode": "Enter invite code",
    "members": "Members",
    "member": "Member",
    "admin": "Admin",
    "settings": "Group Settings",
    "leaveGroup": "Leave Group",
    "deleteGroup": "Delete Group",
    "mode": {
      "gifts": "Gifts",
      "greetings": "Greetings Only",
      "giftsDescription": "Coordinate gifts and track contributions",
      "greetingsDescription": "Send birthday greetings without gift coordination"
    },
    "budget": {
      "title": "Budget",
      "perGift": "Per Gift",
      "monthly": "Monthly Pool",
      "yearly": "Yearly Budget",
      "amount": "Budget Amount",
      "spent": "Spent",
      "remaining": "Remaining"
    },
    "empty": {
      "noGroups": "No groups yet",
      "noGroupsDescription": "Create or join a group to start celebrating birthdays together!",
      "noMembers": "No members yet"
    },
    "confirmLeave": "Are you sure you want to leave this group?",
    "confirmDelete": "Are you sure you want to delete this group? This cannot be undone."
  },
  "wishlist": {
    "title": "My Wishlist",
    "addItem": "Add Item",
    "editItem": "Edit Item",
    "itemTitle": "Title",
    "itemUrl": "URL",
    "itemPrice": "Price",
    "itemPriority": "Priority",
    "itemImage": "Image URL",
    "itemType": {
      "gift": "Gift",
      "surpriseMe": "Surprise Me",
      "mysteryBox": "Mystery Box"
    },
    "priority": {
      "low": "Low",
      "medium": "Medium",
      "high": "High",
      "highest": "Must Have"
    },
    "claim": {
      "claim": "Claim",
      "unclaim": "Unclaim",
      "claimed": "Claimed",
      "claimedBy": "Claimed by {{name}}",
      "taken": "Taken",
      "youClaimed": "You claimed this",
      "confirmUnclaim": "Are you sure you want to unclaim this item?"
    },
    "split": {
      "title": "Split Contribution",
      "openSplit": "Open for Split",
      "closeSplit": "Close Split",
      "contribute": "Contribute",
      "pledged": "Pledged",
      "funded": "Funded",
      "fullyFunded": "Fully Funded!",
      "contributors": "Contributors",
      "yourContribution": "Your Contribution",
      "enterAmount": "Enter amount"
    },
    "favorite": {
      "markFavorite": "Mark as Favorite",
      "removeFavorite": "Remove from Favorites",
      "mostWanted": "Most Wanted"
    },
    "empty": {
      "noItems": "No items yet",
      "noItemsDescription": "Add something you'd love to receive!",
      "noItemsOther": "{{name}} hasn't added any items yet"
    },
    "errors": {
      "titleRequired": "Title is required",
      "invalidUrl": "Please enter a valid URL",
      "invalidPrice": "Please enter a valid price"
    }
  },
  "notifications": {
    "title": "Notifications",
    "markAllRead": "Mark all as read",
    "empty": {
      "noNotifications": "No notifications",
      "noNotificationsDescription": "You're all caught up!"
    },
    "types": {
      "friendRequest": "Friend Request",
      "friendAccepted": "Friend Request Accepted",
      "birthdayReminder": "Birthday Reminder",
      "giftLeader": "Gift Leader",
      "itemClaimed": "Item Claimed",
      "splitInvite": "Split Invite",
      "splitFunded": "Split Funded",
      "contribution": "Contribution"
    }
  },
  "profile": {
    "title": "Profile",
    "editProfile": "Edit Profile",
    "displayName": "Display Name",
    "birthday": "Birthday",
    "birthdayLocked": "Birthday cannot be changed",
    "profilePhoto": "Profile Photo",
    "changePhoto": "Change Photo",
    "removePhoto": "Remove Photo",
    "personalDetails": {
      "title": "Personal Details",
      "subtitle": "Help your friends find the perfect gift",
      "sizes": "Sizes",
      "shirtSize": "Shirt Size",
      "shoeSize": "Shoe Size",
      "pantSize": "Pant Size",
      "ringSize": "Ring Size",
      "preferences": "Preferences",
      "favoriteColors": "Favorite Colors",
      "favoriteBrands": "Favorite Brands",
      "interests": "Interests",
      "dislikes": "Dislikes",
      "externalLinks": "External Wishlists",
      "addLink": "Add Link",
      "completeness": "{{percent}}% complete",
      "lastUpdated": "Last updated {{date}}"
    },
    "secretNotes": {
      "title": "Secret Notes",
      "subtitle": "Notes from group members",
      "addNote": "Add a note",
      "editNote": "Edit note",
      "deleteNote": "Delete note",
      "placeholder": "Add helpful info for gift-giving...",
      "empty": "No notes yet"
    }
  },
  "calendar": {
    "title": "Calendar",
    "today": "Today",
    "upcoming": "Upcoming",
    "birthdays": "Birthdays",
    "friendDates": "Friend Dates",
    "syncToDevice": "Sync to Calendar",
    "synced": "Synced!",
    "countdown": {
      "today": "Today!",
      "tomorrow": "Tomorrow",
      "daysLeft": "{{count}} day left",
      "daysLeft_plural": "{{count}} days left",
      "weeksLeft": "{{count}} week left",
      "weeksLeft_plural": "{{count}} weeks left",
      "monthsLeft": "{{count}} month left",
      "monthsLeft_plural": "{{count}} months left"
    },
    "publicDates": {
      "title": "Public Dates",
      "add": "Add Date",
      "edit": "Edit Date",
      "dateTitle": "Event Title",
      "dateMonth": "Month",
      "dateDay": "Day",
      "empty": "No public dates"
    }
  },
  "celebrations": {
    "title": "Celebration",
    "giftLeader": {
      "title": "Gift Leader",
      "youAre": "You're the Gift Leader!",
      "assignedTo": "{{name}} is the Gift Leader",
      "responsibilities": "Coordinate the gift, collect contributions, and make the purchase.",
      "reassign": "Reassign Gift Leader"
    },
    "contributions": {
      "title": "Contributions",
      "contribute": "Contribute",
      "yourContribution": "Your Contribution",
      "totalCollected": "Total Collected",
      "target": "Target",
      "markPaid": "Mark as Paid",
      "paid": "Paid",
      "pledged": "Pledged"
    },
    "chat": {
      "title": "Planning Chat",
      "placeholder": "Type a message...",
      "send": "Send",
      "linkToItem": "Link to wishlist item",
      "empty": "No messages yet. Start planning!"
    },
    "status": {
      "upcoming": "Upcoming",
      "inProgress": "In Progress",
      "completed": "Completed"
    }
  },
  "settings": {
    "title": "Settings",
    "language": "Language",
    "languageDescription": "Choose your preferred language",
    "notifications": "Notifications",
    "notificationsDescription": "Manage notification preferences",
    "privacy": "Privacy",
    "help": "Help & Support",
    "about": "About",
    "version": "Version {{version}}"
  },
  "languages": {
    "en": "English",
    "es": "Spanish"
  },
  "friends": {
    "title": "Friends",
    "findFriends": "Find Friends",
    "addFriend": "Add Friend",
    "pending": "Pending",
    "requests": "Requests",
    "sent": "Sent",
    "received": "Received",
    "accept": "Accept",
    "decline": "Decline",
    "cancel": "Cancel Request",
    "remove": "Remove Friend",
    "block": "Block User",
    "unblock": "Unblock",
    "searchUsers": "Search users by name or email",
    "importContacts": "Import Contacts",
    "contactsPermission": "Allow access to find friends who use the app",
    "empty": {
      "noFriends": "No friends yet",
      "noFriendsDescription": "Find friends to see their birthdays and special dates!",
      "noRequests": "No pending requests",
      "noResults": "No users found"
    },
    "confirmRemove": "Are you sure you want to remove {{name}} as a friend?",
    "confirmBlock": "Block {{name}}? They won't be able to send you friend requests."
  },
  "onboarding": {
    "welcome": "Welcome!",
    "letsGetStarted": "Let's get started",
    "whatsYourName": "What's your name?",
    "whensYourBirthday": "When's your birthday?",
    "birthdayNote": "Your birthday cannot be changed later to keep celebrations fair.",
    "addPhoto": "Add a profile photo",
    "addPhotoOptional": "Optional, but helps friends recognize you",
    "skip": "Skip for now",
    "finish": "Finish Setup"
  }
}
```

This covers approximately 400 keys organized by feature namespace. Include all buttons, labels, headers, placeholders, error messages, empty states, and confirmation dialogs that appear throughout the app.
  </action>
  <verify>
File is valid JSON with:
- 8 top-level namespaces (common, auth, groups, wishlist, notifications, profile, calendar, celebrations, settings, languages, friends, onboarding)
- Nested structure for logical grouping
- {{variable}} interpolation for dynamic content
- _plural suffixes for pluralization
- Approximately 350-450 total keys
  </verify>
  <done>
Complete English translation file with:
- All 8+ namespaces covering app features
- Nested key structure for organization
- i18next interpolation syntax ({{variable}})
- Pluralization support (_plural suffix)
- ~400 translation keys
  </done>
</task>

<task type="auto">
  <name>Task 2: Create comprehensive Spanish translation file and update config</name>
  <files>src/i18n/locales/es.json, src/i18n/resources.ts, src/i18n/types/i18next.d.ts</files>
  <action>
1. **Create es.json with professional neutral Latin American Spanish translations:**

Mirror the exact key structure from en.json. Use neutral Latin American Spanish (ustedes, not vosotros). Translations should be natural, not word-for-word.

Key translation guidelines:
- "You" (singular formal) = "usted" or informal "tu" (use tu for casual app feel)
- "You" (plural) = "ustedes" (not vosotros)
- "Birthday" = "cumpleanos"
- "Wishlist" = "lista de deseos"
- "Gift" = "regalo"
- "Friend" = "amigo/amiga" (use context-appropriate form)
- Numbers: Use same format as English (1, 2, 3)
- Date format references should note Spanish format where appropriate

Example of natural translation:
- EN: "No groups yet" -> ES: "Aun no tienes grupos"
- EN: "Add something you'd love to receive!" -> ES: "Agrega algo que te gustaria recibir!"
- EN: "Mark as Favorite" -> ES: "Marcar como favorito"

Create the complete es.json file with all keys matching en.json structure.

2. **Update src/i18n/resources.ts:**

The current resources.ts uses a single 'translation' namespace. Keep this simple structure since we're using nested JSON, not separate namespace files:

```typescript
import en from './locales/en.json';
import es from './locales/es.json';

export const resources = {
  en: { translation: en },
  es: { translation: es },
} as const;

export const defaultNS = 'translation';
```

No changes needed if structure is already correct.

3. **Update src/i18n/types/i18next.d.ts for type safety:**

Update the type declaration to ensure TypeScript autocomplete works with the new comprehensive translation structure:

```typescript
import 'i18next';
import type { resources } from '../resources';

declare module 'i18next' {
  interface CustomTypeOptions {
    defaultNS: 'translation';
    resources: (typeof resources)['en'];
  }
}
```

4. **Verify TypeScript autocomplete is working:**

Create a temporary test to confirm type inference:
```bash
# Test that TypeScript recognizes the nested keys
npx tsc --noEmit
```

Then verify in your IDE that using `t('common.loading')`, `t('auth.login')`, `t('groups.createGroup')` shows autocomplete suggestions. If autocomplete doesn't appear, ensure:
- tsconfig.json includes `src/**/*`
- The i18next.d.ts file is being picked up
- Run `npx tsc --noEmit` to check for type errors

Commit with message: `feat(30-04): add comprehensive EN/ES translation files (~400 keys)`
  </action>
  <verify>
- es.json is valid JSON with same key structure as en.json
- Key count matches between en.json and es.json
- No "vosotros" forms in Spanish (use "ustedes")
- resources.ts imports both locale files
- i18next.d.ts updated with CustomTypeOptions
- `npx tsc --noEmit` passes without type errors
- IDE shows autocomplete for nested keys like `t('common.loading')`
- Git commit exists
  </verify>
  <done>
Complete translation system with:
- ~400 English keys with proper namespacing
- ~400 matching Spanish keys with natural translations
- Neutral Latin American Spanish (ustedes, not vosotros)
- TypeScript autocomplete for all translation keys
- Committed to git
  </done>
</task>

</tasks>

<verification>
1. en.json has 8+ namespaces with ~400 total keys
2. es.json has identical key structure to en.json
3. Spanish translations are natural, not word-for-word
4. Spanish uses "ustedes" (not "vosotros") for plural you
5. i18next interpolation syntax used consistently
6. Pluralization keys present (_plural suffix)
7. TypeScript types updated
8. Git commits created
</verification>

<success_criteria>
- [ ] en.json contains ~400 keys organized by 8+ namespaces
- [ ] es.json has identical key structure with Spanish translations
- [ ] Spanish uses neutral Latin American style (ustedes)
- [ ] Translations are natural and culturally appropriate
- [ ] Interpolation syntax consistent ({{variable}})
- [ ] Pluralization keys present where needed
- [ ] resources.ts properly aggregates locales
- [ ] TypeScript declarations enable autocomplete
- [ ] Committed to git
</success_criteria>

<output>
After completion, create `.planning/phases/30-server-integration-translation-files/30-04-SUMMARY.md`
</output>
