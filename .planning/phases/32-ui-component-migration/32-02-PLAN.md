---
phase: 32-ui-component-migration
plan: 02
type: execute
wave: 2
depends_on: ["32-01"]
files_modified:
  - app/(app)/(tabs)/index.tsx
  - app/(app)/(tabs)/groups.tsx
  - app/(app)/(tabs)/calendar.tsx
  - app/(app)/(tabs)/friends.tsx
  - app/(app)/(tabs)/notifications.tsx
  - app/(app)/(tabs)/celebrations.tsx
autonomous: true

must_haves:
  truths:
    - "Tab screen titles display in selected language"
    - "Empty state messages display in selected language"
    - "Button labels and action text display in selected language"
    - "Calendar dates format according to selected language locale"
  artifacts:
    - path: "app/(app)/(tabs)/index.tsx"
      provides: "Translated wishlist main screen"
      contains: "useTranslation"
    - path: "app/(app)/(tabs)/groups.tsx"
      provides: "Translated groups screen"
      contains: "useTranslation"
    - path: "app/(app)/(tabs)/calendar.tsx"
      provides: "Translated calendar with localized dates"
      contains: "useLocalizedFormat"
  key_links:
    - from: "app/(app)/(tabs)/calendar.tsx"
      to: "hooks/useLocalizedFormat.ts"
      via: "import and usage"
      pattern: "useLocalizedFormat"
---

<objective>
Migrate the 6 main tab screens to use translations and localized date formatting

Purpose: These are the highest-traffic screens - users see them immediately after login
Output: All tab screens display text in selected language, dates formatted correctly
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/32-ui-component-migration/32-RESEARCH.md
@src/i18n/locales/en.json
@hooks/useLocalizedFormat.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate wishlist, groups, and friends tabs</name>
  <files>
    app/(app)/(tabs)/index.tsx
    app/(app)/(tabs)/groups.tsx
    app/(app)/(tabs)/friends.tsx
  </files>
  <action>
For each file, apply the standard translation migration pattern:

1. Add import: `import { useTranslation } from 'react-i18next';`

2. Add hook at component start: `const { t } = useTranslation();`

3. Replace all hardcoded strings with t() calls using existing keys from en.json:
   - Titles: `t('wishlist.title')`, `t('groups.title')`, `t('friends.title')`
   - Empty states: `t('wishlist.empty.noItems')`, `t('groups.empty.noGroups')`, etc.
   - Button labels: `t('wishlist.addItem')`, `t('groups.createGroup')`, `t('groups.joinGroup')`
   - Action text: `t('common.loading')`, `t('common.retry')`

4. For index.tsx (wishlist), translate:
   - Screen title and header
   - "Start Your Wishlist" empty state
   - "Tap the + button..." description
   - All Alert.alert() calls (title, message, buttons)
   - "Loading...", "Error", etc.

5. For groups.tsx, translate:
   - "My Groups" header
   - "No Groups Yet" empty state
   - "Create a new group or join one with an invite code" description
   - Member count text using pluralization: `t('groups.member', { count: memberCount })`

6. For friends.tsx, translate:
   - "Friends" header
   - "No friends yet" empty state
   - "Find Friends" button
   - Request counts and pending states
   - All Alert.alert() for remove friend, etc.

Pattern for Alert.alert() translation:
```typescript
Alert.alert(
  t('alerts.titles.confirm'),
  t('alerts.messages.confirmRemoveFriend'),
  [
    { text: t('common.cancel'), style: 'cancel' },
    { text: t('common.remove'), style: 'destructive', onPress: handleRemove },
  ]
);
```
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `grep -c "useTranslation" app/\(app\)/\(tabs\)/index.tsx` returns 1+
    - `grep -c "useTranslation" app/\(app\)/\(tabs\)/groups.tsx` returns 1+
    - `grep -c "useTranslation" app/\(app\)/\(tabs\)/friends.tsx` returns 1+
  </verify>
  <done>
    - index.tsx, groups.tsx, friends.tsx use useTranslation hook
    - All visible text uses t() function calls
    - All Alert.alert() calls have translated title, message, and button labels
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate calendar, notifications, and celebrations tabs</name>
  <files>
    app/(app)/(tabs)/calendar.tsx
    app/(app)/(tabs)/notifications.tsx
    app/(app)/(tabs)/celebrations.tsx
  </files>
  <action>
For each file, apply translation migration plus date localization where needed:

1. Add imports:
   ```typescript
   import { useTranslation } from 'react-i18next';
   import { useLocalizedFormat } from '@/hooks/useLocalizedFormat';
   ```

2. Add hooks: `const { t } = useTranslation();` and if using dates: `const { format, formatDistanceToNow } = useLocalizedFormat();`

3. For calendar.tsx:
   - Replace date-fns `format()` calls with localized version from hook
   - Use format patterns that work in both languages (e.g., 'PPP' for "February 11, 2026" / "11 de febrero de 2026")
   - Translate section headers: "Upcoming", "Today", etc.
   - Translate countdown text references

4. For notifications.tsx:
   - Translate "Notifications" header
   - Translate "No notifications" empty state
   - Translate "Mark All as Read" action
   - Localize notification timestamps using formatDistanceToNow
   - Pattern: `formatDistanceToNow(new Date(notification.created_at), { addSuffix: true })`

5. For celebrations.tsx:
   - Translate headers and section titles
   - Translate status badges (Upcoming, In Progress, Completed)
   - Translate any action buttons

Key translation keys to use:
- `calendar.title`, `calendar.today`, `calendar.upcoming`
- `notifications.title`, `notifications.empty.noNotifications`
- `celebrations.title`, `celebrations.status.upcoming`, `celebrations.status.inProgress`
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `grep -c "useTranslation" app/\(app\)/\(tabs\)/calendar.tsx` returns 1+
    - `grep -c "useLocalizedFormat" app/\(app\)/\(tabs\)/calendar.tsx` returns 1+ (if using dates)
    - `grep -c "useTranslation" app/\(app\)/\(tabs\)/notifications.tsx` returns 1+
  </verify>
  <done>
    - calendar.tsx, notifications.tsx, celebrations.tsx use useTranslation
    - Date formatting uses useLocalizedFormat hook
    - All visible text and dates localized
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. All 6 tab screens import useTranslation
3. Calendar screen uses useLocalizedFormat for dates
4. Run app, switch to Spanish, verify tab screens show Spanish text
</verification>

<success_criteria>
- All 6 tab screens (index, groups, calendar, friends, notifications, celebrations) use translations
- Calendar dates display in locale format (e.g., "11 de febrero" in Spanish)
- Empty states, headers, buttons all display in selected language
- No hardcoded English strings remain in tab screens
</success_criteria>

<output>
After completion, create `.planning/phases/32-ui-component-migration/32-02-SUMMARY.md`
</output>
