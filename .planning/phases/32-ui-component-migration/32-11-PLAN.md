---
phase: 32-ui-component-migration
plan: 11
type: execute
wave: 3
depends_on: ["32-02"]
files_modified:
  - components/notes/NoteCard.tsx
  - components/notes/MemberNotesSection.tsx
  - components/notes/AddNoteSheet.tsx
  - components/friends/FriendCard.tsx
  - components/friends/FriendRequestCard.tsx
  - components/discovery/MatchedContactCard.tsx
  - components/calendar/BirthdayCalendar.tsx
  - components/calendar/CountdownCard.tsx
  - components/calendar/CalendarSyncButton.tsx
  - components/notifications/NotificationIconButton.tsx
  - components/ui/StarRating.tsx
autonomous: true

must_haves:
  truths:
    - "Note cards and forms display in selected language"
    - "Friend cards display in selected language"
    - "Calendar components display in selected language"
    - "Countdown text displays in selected language"
  artifacts:
    - path: "components/notes/AddNoteSheet.tsx"
      provides: "Translated note form"
      contains: "useTranslation"
    - path: "components/friends/FriendRequestCard.tsx"
      provides: "Translated friend request card"
      contains: "useLocalizedFormat"
    - path: "components/calendar/CountdownCard.tsx"
      provides: "Translated countdown display"
      contains: "useTranslation"
  key_links:
    - from: "components/calendar/CountdownCard.tsx"
      to: "utils/countdown.ts"
      via: "getCountdownText with t"
      pattern: "getCountdownText"
---

<objective>
Migrate notes, friends, calendar, and UI components (11 files) to use translations

Purpose: Complete the component migration to ensure full app localization
Output: All remaining components display in selected language
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/32-ui-component-migration/32-RESEARCH.md
@src/i18n/locales/en.json
@hooks/useLocalizedFormat.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate notes and friends components</name>
  <files>
    components/notes/NoteCard.tsx
    components/notes/MemberNotesSection.tsx
    components/notes/AddNoteSheet.tsx
    components/friends/FriendCard.tsx
    components/friends/FriendRequestCard.tsx
    components/discovery/MatchedContactCard.tsx
  </files>
  <action>
1. For NoteCard.tsx:
   - Add imports:
     ```typescript
     import { useTranslation } from 'react-i18next';
     import { useLocalizedFormat } from '@/hooks/useLocalizedFormat';
     ```
   - Add hooks
   - Translate action labels: "Edit", "Delete"
   - Use useLocalizedFormat for timestamp display
   - All Alert.alert() calls for delete confirmation

2. For MemberNotesSection.tsx:
   - Add imports and hook
   - Translate:
     - "Secret Notes" header: `t('profile.secretNotes.title')`
     - "Private notes about this person..." subtitle: `t('profile.secretNotes.subtitle')`
     - "Add Note" button: `t('profile.secretNotes.addNote')`
     - Empty state: `t('profile.secretNotes.empty')`
   - All Alert.alert() calls

3. For AddNoteSheet.tsx:
   - Add imports and hook
   - Translate:
     - "Add Note" / "Edit Note" title: `t('profile.secretNotes.addNote')`, `t('profile.secretNotes.editNote')`
     - Placeholder: `t('profile.secretNotes.placeholder')`
     - "Save" button: `t('common.save')`
     - "Delete Note" button: `t('profile.secretNotes.deleteNote')`
   - All Alert.alert() calls

4. For FriendCard.tsx:
   - Add imports and hook
   - Translate:
     - "Remove" button: `t('friends.remove')`
     - Any status indicators
   - All Alert.alert() calls for remove confirmation

5. For FriendRequestCard.tsx:
   - Add imports:
     ```typescript
     import { useTranslation } from 'react-i18next';
     import { useLocalizedFormat } from '@/hooks/useLocalizedFormat';
     ```
   - Add hooks
   - Translate:
     - "Accept" button: `t('friends.accept')`
     - "Decline" button: `t('friends.decline')`
     - Request timestamp with localized format
   - All Alert.alert() calls

6. For MatchedContactCard.tsx:
   - Add imports and hook
   - Translate:
     - "Add Friend" button: `t('friends.addFriend')`
     - "Pending" status: `t('friends.pending')`
   - All Alert.alert() calls
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `grep -l "useTranslation" components/notes/AddNoteSheet.tsx`
    - `grep -l "useTranslation" components/friends/FriendRequestCard.tsx`
    - `grep -l "useLocalizedFormat" components/friends/FriendRequestCard.tsx`
  </verify>
  <done>
    - All 6 notes/friends/discovery components use translations
    - Timestamps display in localized format
    - Action buttons display in selected language
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate calendar and UI components</name>
  <files>
    components/calendar/BirthdayCalendar.tsx
    components/calendar/CountdownCard.tsx
    components/calendar/CalendarSyncButton.tsx
    components/notifications/NotificationIconButton.tsx
    components/ui/StarRating.tsx
  </files>
  <action>
1. For BirthdayCalendar.tsx:
   - Add imports:
     ```typescript
     import { useTranslation } from 'react-i18next';
     import { useLocalizedFormat } from '@/hooks/useLocalizedFormat';
     ```
   - Add hooks
   - Use localized format for all date displays
   - Translate section headers: "Today", "Upcoming", etc.
   - Translate month names if manually constructed (use format with locale instead)

2. For CountdownCard.tsx:
   - Add imports and hook
   - IMPORTANT: Use temporary inline localization until Plan 32-12 updates countdown.ts.
     This is intentional - Plan 32-12 (Wave 4) will update the utility, but CountdownCard
     needs to work in Wave 3. Inline implementation is acceptable since:
     (a) It provides immediate localization for this component
     (b) Plan 32-12 will make getCountdownText accept optional t parameter for backward compatibility
     (c) After Plan 32-12 completes, CountdownCard can optionally be updated to use the utility
   - Translate the countdown phrases directly using t():
     ```typescript
     const getLocalizedCountdown = (days: number) => {
       if (days === 0) return t('calendar.countdown.today');
       if (days === 1) return t('calendar.countdown.tomorrow');
       if (days <= 7) return t('calendar.countdown.daysLeft', { count: days });
       if (days <= 30) {
         const weeks = Math.floor(days / 7);
         return t('calendar.countdown.weeksLeft', { count: weeks });
       }
       const months = Math.floor(days / 30);
       return t('calendar.countdown.monthsLeft', { count: months });
     };
     ```
   - Use localized date format for birthday display

3. For CalendarSyncButton.tsx:
   - Add imports and hook
   - Translate:
     - "Sync to Device" button: `t('calendar.syncToDevice')`
     - "Synced" status: `t('calendar.synced')`
   - All Alert.alert() calls for permissions or errors

4. For NotificationIconButton.tsx:
   - Add imports and hook
   - Translate accessibility labels if present
   - Badge count is numeric (no translation needed)

5. For StarRating.tsx:
   - Add imports and hook
   - Translate accessibility labels:
     - "{{count}} of 5 stars": can construct or add key
     - "Set priority" type labels
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `grep -l "useTranslation" components/calendar/CountdownCard.tsx`
    - `grep -l "useLocalizedFormat" components/calendar/BirthdayCalendar.tsx`
    - `grep -l "useTranslation" components/calendar/CalendarSyncButton.tsx`
  </verify>
  <done>
    - All 5 calendar/UI components use translations
    - Countdown text displays in selected language
    - Calendar dates display in localized format
    - Sync button displays in selected language
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. All 11 components use useTranslation
3. Calendar components use useLocalizedFormat
4. Run app, switch to Spanish, verify all remaining components show Spanish
</verification>

<success_criteria>
- Notes components display in selected language
- Friend cards and request cards display in selected language
- Calendar shows localized dates and countdown text
- "Sync to Device" shows "Sincronizar con Dispositivo" in Spanish
- Countdown shows "Hoy!", "Manana", "5 dias restantes" in Spanish
</success_criteria>

<output>
After completion, create `.planning/phases/32-ui-component-migration/32-11-SUMMARY.md`
</output>
