---
phase: 32-ui-component-migration
plan: 05
type: execute
wave: 2
depends_on: ["32-01"]
files_modified:
  - app/group/[id]/index.tsx
  - app/group/[id]/settings.tsx
  - app/(app)/celebration/[id].tsx
  - app/(app)/requests.tsx
  - app/(app)/discover.tsx
autonomous: true

must_haves:
  truths:
    - "Group detail screen displays in selected language"
    - "Group settings screen displays in selected language"
    - "Celebration page displays in selected language"
    - "Friend requests screen displays in selected language"
  artifacts:
    - path: "app/group/[id]/index.tsx"
      provides: "Translated group detail view"
      contains: "useTranslation"
    - path: "app/group/[id]/settings.tsx"
      provides: "Translated group settings"
      contains: "useTranslation"
    - path: "app/(app)/celebration/[id].tsx"
      provides: "Translated celebration page"
      contains: "useTranslation"
  key_links:
    - from: "app/(app)/celebration/[id].tsx"
      to: "src/i18n/locales/en.json"
      via: "t() function calls"
      pattern: "t\\('celebrations\\."
---

<objective>
Migrate group, celebration, and discovery screens to use translations

Purpose: Group and celebration screens are core app functionality for gift coordination
Output: All group-related screens display in selected language
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/32-ui-component-migration/32-RESEARCH.md
@src/i18n/locales/en.json
@hooks/useLocalizedFormat.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate group screens</name>
  <files>
    app/group/[id]/index.tsx
    app/group/[id]/settings.tsx
  </files>
  <action>
1. For group/[id]/index.tsx (group detail view):
   - Add imports: `import { useTranslation } from 'react-i18next';`
   - Add hook: `const { t } = useTranslation();`
   - Translate:
     - Section headers: "Members", etc.
     - Member count with pluralization: `{memberCount} {t('groups.member', { count: memberCount })}`
     - Mode badge text (may come from component)
     - Empty state messages
     - Action buttons if any
   - All Alert.alert() calls:
     ```typescript
     Alert.alert(
       t('alerts.titles.error'),
       t('alerts.messages.failedLoadGroup')
     );
     ```

2. For group/[id]/settings.tsx:
   - Add imports and hook
   - Translate all section headers:
     - "Group Info": `t('sections.groupInfo')`
     - "Group Mode": `t('sections.groupMode')`
     - "Budget": `t('sections.budget')`
     - "Members": `t('sections.members', { count: memberCount })`
     - "Invite Code": `t('sections.inviteCode')`
     - "Danger Zone": `t('sections.dangerZone')`
   - Translate form labels:
     - "Group Name": `t('groups.groupName')`
     - "Group Description": `t('groups.groupDescription')`
   - Translate buttons:
     - "Save": `t('common.save')`
     - "Leave Group": `t('groups.leaveGroup')`
     - "Delete Group": `t('groups.deleteGroup')`
   - Mode selector text: "Gifts", "Greetings"
   - Budget settings labels
   - All Alert.alert() calls for confirmations:
     ```typescript
     Alert.alert(
       t('alerts.titles.confirm'),
       t('alerts.messages.confirmLeaveGroup'),
       [
         { text: t('common.cancel'), style: 'cancel' },
         { text: t('groups.leaveGroup'), style: 'destructive', onPress: handleLeave },
       ]
     );
     ```
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `grep -c "useTranslation" app/group/\[id\]/index.tsx` returns 1+
    - `grep -c "useTranslation" app/group/\[id\]/settings.tsx` returns 1+
  </verify>
  <done>
    - Group index and settings screens use useTranslation
    - All section headers, labels, and buttons translated
    - All Alert.alert() calls translated
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate celebration, requests, and discover screens</name>
  <files>
    app/(app)/celebration/[id].tsx
    app/(app)/requests.tsx
    app/(app)/discover.tsx
  </files>
  <action>
1. For celebration/[id].tsx:
   - Add imports:
     ```typescript
     import { useTranslation } from 'react-i18next';
     import { useLocalizedFormat } from '@/hooks/useLocalizedFormat';
     ```
   - Add hooks for both translation and date formatting
   - Translate:
     - "Celebration" or member name's birthday header
     - "Gift Leader" section: `t('celebrations.giftLeader.title')`
     - "You are the gift leader": `t('celebrations.giftLeader.youAre')`
     - "Contributions" section: `t('celebrations.contributions.title')`
     - "Group Chat" section: `t('celebrations.chat.title')`
     - Status badges: `t('celebrations.status.upcoming')`, etc.
     - Wishlist section headers
   - Use localized format for birthday date display
   - All Alert.alert() calls:
     ```typescript
     Alert.alert(
       t('alerts.titles.confirm'),
       t('alerts.messages.confirmClaim'),
       // ...
     );
     ```

2. For requests.tsx (friend requests):
   - Add imports and hook
   - Translate:
     - "Requests" header: `t('friends.requests')`
     - "Received" / "Sent" tabs: `t('friends.received')`, `t('friends.sent')`
     - "Accept" / "Decline" buttons: `t('friends.accept')`, `t('friends.decline')`
     - Empty state: `t('friends.empty.noRequests')`
   - All Alert.alert() calls

3. For discover.tsx (find friends):
   - Add imports and hook
   - Translate:
     - "Find Friends" header: `t('friends.findFriends')`
     - Search placeholder: `t('friends.searchUsers')`
     - "Import Contacts" button: `t('friends.importContacts')`
     - "Allow access to contacts" message: `t('friends.contactsPermission')`
     - Empty/no results: `t('friends.empty.noResults')`
   - All Alert.alert() calls
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `grep -c "useTranslation" app/\(app\)/celebration/\[id\].tsx` returns 1+
    - `grep -c "useTranslation" app/\(app\)/requests.tsx` returns 1+
    - `grep -c "useTranslation" app/\(app\)/discover.tsx` returns 1+
  </verify>
  <done>
    - celebration/[id].tsx uses translations and localized dates
    - requests.tsx uses translations
    - discover.tsx uses translations
    - All user-facing text translated
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. All 5 screens use useTranslation
3. Celebration screen uses useLocalizedFormat for dates
4. Run app, switch to Spanish, verify group and celebration screens show Spanish
</verification>

<success_criteria>
- Group detail and settings screens fully translated
- Celebration page fully translated with localized dates
- Friend requests screen fully translated
- Discover/find friends screen fully translated
- All Alert.alert() calls in these screens translated
</success_criteria>

<output>
After completion, create `.planning/phases/32-ui-component-migration/32-05-SUMMARY.md`
</output>
