---
phase: 14-group-view-redesign
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/groups/FavoritePreview.tsx
  - components/groups/MemberCard.tsx
autonomous: true

must_haves:
  truths:
    - "Member cards show profile photo and name only (no email exposed)"
    - "Member cards show birthday countdown text (12 days, 2 months)"
    - "Member cards have space for favorite item preview"
  artifacts:
    - path: "components/groups/FavoritePreview.tsx"
      provides: "Compact favorite item display with thumbnail and title"
      exports: ["FavoritePreview"]
    - path: "components/groups/MemberCard.tsx"
      provides: "Member card with photo, name, countdown, favorite preview"
      exports: ["MemberCard"]
  key_links:
    - from: "components/groups/MemberCard.tsx"
      to: "components/groups/FavoritePreview.tsx"
      via: "import and conditional render"
      pattern: "import.*FavoritePreview"
    - from: "components/groups/MemberCard.tsx"
      to: "utils/countdown.ts"
      via: "import getCountdownText"
      pattern: "import.*getCountdownText.*from.*countdown"
---

<objective>
Create member card components: FavoritePreview for compact item display and MemberCard for birthday-focused member display.

Purpose: Enable member list to show each member's profile, birthday countdown, and favorite item preview without exposing email (GVIEW-03, GVIEW-05, partial GVIEW-06).
Output: Two reusable components ready for integration into the group detail screen member list.
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-group-view-redesign/14-RESEARCH.md

# Existing patterns
@utils/countdown.ts
@constants/theme.ts
@app/group/[id].tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FavoritePreview component</name>
  <files>components/groups/FavoritePreview.tsx</files>
  <action>
Create a compact component that displays a favorite item's thumbnail and title.

Interface:
```typescript
interface FavoritePreviewProps {
  item: {
    title: string;
    image_url: string | null;
    item_type: 'standard' | 'surprise_me' | 'mystery_box';
  };
}
```

Layout:
- Horizontal row with small thumbnail (40x40) and title
- If image_url is null or item_type is surprise_me/mystery_box, show icon instead:
  - surprise_me: help-circle icon in burgundy
  - mystery_box: gift icon in gold
  - standard with no image: image-off icon in gray
- Title: fontSize 12, numberOfLines 1, ellipsizeMode 'tail', color burgundy[600]
- Wrapper: flexDirection row, alignItems center, gap spacing.xs
- Optional subtle background (cream[100]) with borderRadius.sm

Use Image from react-native for thumbnail, with resizeMode 'cover'.
  </action>
  <verify>
Run TypeScript check: `npx tsc --noEmit`
Component file exists and exports FavoritePreview
  </verify>
  <done>
FavoritePreview component displays thumbnail (or icon fallback) with truncated title in compact layout
  </done>
</task>

<task type="auto">
  <name>Task 2: Create MemberCard component</name>
  <files>components/groups/MemberCard.tsx</files>
  <action>
Create a member card component showing profile, birthday countdown, and favorite preview.

Interface:
```typescript
interface MemberCardProps {
  member: {
    role: string;
    users: {
      id: string;
      full_name: string;
      avatar_url: string | null;
    };
  };
  daysUntilBirthday: number;
  favoriteItem?: {
    title: string;
    image_url: string | null;
    item_type: 'standard' | 'surprise_me' | 'mystery_box';
  } | null;
  onPress: () => void;
  index?: number;  // For staggered animation
}
```

Layout (inside TouchableOpacity for onPress):
1. MotiView wrapper with entrance animation (staggered by index)
2. Card container: white background, borderRadius.lg, padding spacing.md, gold[100] border, shadow.sm
3. Left: User avatar (56x56 circle with initials or image if avatar_url)
4. Middle column (flex: 1):
   - Row 1: Full name (fontSize 16, fontWeight 700, burgundy[800]) + Admin badge if role='admin'
   - Row 2: Birthday countdown using getCountdownText() with cake icon (fontSize 13, color based on urgency)
5. Right/Bottom: FavoritePreview if favoriteItem is provided

IMPORTANT: Do NOT show member email (GVIEW-03 requirement). Only show:
- Profile photo/initials
- Full name
- Admin badge (if applicable)
- Birthday countdown
- Favorite preview (if available)

Use getCountdownText from utils/countdown.ts for countdown display.
Use getStatusColor or getPlanningStatus for urgency-based coloring of countdown text.

Admin badge styling: Match existing pattern from [id].tsx (gold background, gold border).
  </action>
  <verify>
Run TypeScript check: `npx tsc --noEmit`
Component file exists and exports MemberCard
No email field rendered in component
getCountdownText imported and used
  </verify>
  <done>
MemberCard component displays member photo, name, admin badge, birthday countdown, and optional favorite preview without email
  </done>
</task>

</tasks>

<verification>
- [ ] `npx tsc --noEmit` passes with no errors in new files
- [ ] FavoritePreview.tsx exists with correct exports
- [ ] MemberCard.tsx exists with correct exports
- [ ] MemberCard does NOT render email anywhere
- [ ] MemberCard imports and uses getCountdownText from countdown.ts
- [ ] Styling follows established design system
</verification>

<success_criteria>
1. FavoritePreview displays thumbnail and title compactly with proper fallbacks for special items
2. MemberCard displays member photo, name, admin badge, birthday countdown without email
3. MemberCard conditionally renders FavoritePreview when favoriteItem is provided
4. Components use urgency-based coloring for countdown (from countdown.ts utilities)
5. TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/14-group-view-redesign/14-02-SUMMARY.md`
</output>
