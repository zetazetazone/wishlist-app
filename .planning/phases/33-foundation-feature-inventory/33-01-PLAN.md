---
phase: 33-foundation-feature-inventory
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - .planning/phases/33-foundation-feature-inventory/FEATURE-INVENTORY.md
autonomous: true

must_haves:
  truths:
    - "expo-image package is installed at version ~3.0.x"
    - "Feature inventory document maps every LuxuryWishlistCard prop to destination component"
    - "Feature inventory covers all item types (standard, surprise_me, mystery_box)"
    - "Feature inventory covers all view contexts (owner, celebrant, claimer, viewer)"
  artifacts:
    - path: "package.json"
      provides: "expo-image dependency"
      contains: "expo-image"
    - path: ".planning/phases/33-foundation-feature-inventory/FEATURE-INVENTORY.md"
      provides: "Complete prop mapping from LuxuryWishlistCard to new components"
      min_lines: 100
  key_links:
    - from: "FEATURE-INVENTORY.md"
      to: "components/wishlist/LuxuryWishlistCard.tsx"
      via: "prop-by-prop mapping"
      pattern: "LuxuryWishlistCardProps"
---

<objective>
Install expo-image for high-performance image handling and create a comprehensive feature inventory that maps every prop from LuxuryWishlistCard to its destination in the new component architecture.

Purpose: Establish the image library foundation and document the complete migration path before any code changes, ensuring feature parity (PARITY-01, PARITY-02, PARITY-03).

Output: expo-image installed, FEATURE-INVENTORY.md documenting all 27+ props mapped to WishlistGridCard, ItemDetailScreen, and ItemOptionsSheet.
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-foundation-feature-inventory/33-RESEARCH.md
@components/wishlist/LuxuryWishlistCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install expo-image</name>
  <files>package.json</files>
  <action>
Install expo-image using Expo's version-compatible installer:

```bash
npx expo install expo-image
```

This will automatically install the SDK 54 compatible version (~3.0.x).

After installation, verify:
1. package.json includes expo-image dependency
2. No peer dependency warnings for this package
3. TypeScript types are available (expo-image includes built-in types)

Do NOT create any test components yet - just verify the package installs correctly.
  </action>
  <verify>
Run: `grep "expo-image" package.json`
Expected: Shows expo-image with version ~3.0.x

Run: `npx tsc --noEmit 2>&1 | grep -i "expo-image" || echo "No expo-image type errors"`
Expected: No type errors related to expo-image
  </verify>
  <done>expo-image@~3.0.x appears in package.json dependencies, no type errors</done>
</task>

<task type="auto">
  <name>Task 2: Create Feature Inventory Document</name>
  <files>.planning/phases/33-foundation-feature-inventory/FEATURE-INVENTORY.md</files>
  <action>
Create a comprehensive feature inventory mapping every prop from LuxuryWishlistCard to its destination component(s).

Structure the document as:

```markdown
# Feature Inventory: LuxuryWishlistCard Migration

## Overview
Documents the mapping of all props from LuxuryWishlistCard.tsx to the new component architecture.

## Source Component Analysis
LuxuryWishlistCardProps interface with 27+ props serving multiple contexts.

## Prop Mapping Table

| # | Source Prop | Type | Grid Card | Detail Screen | Options Sheet | Notes |
|---|-------------|------|-----------|---------------|---------------|-------|
| 1 | item | WishlistItem | YES | YES | YES (preview) | Core data passed to all |
| 2 | onDelete | (id: string) => void | NO | NO | YES | Moves to options sheet |
| ... | ... | ... | ... | ... | ... | ... |

## Context Mapping

### Owner Context (My Wishlist)
- Grid Card: Shows options button, no claim UI
- Detail Screen: Shows edit/delete via options
- Options Sheet: Full actions (favorite, priority, share, edit, delete)

### Celebrant Context (Viewing own items on celebration page)
- Grid Card: Shows "Taken" badge (no claimer identity)
- Detail Screen: Shows "Taken" badge, no claim actions
- Options Sheet: N/A (not owner)

### Claimer Context (User who claimed the item)
- Grid Card: Shows "Your Claim" indicator
- Detail Screen: Unclaim button, split controls if applicable
- Options Sheet: N/A (not owner)

### Viewer Context (Group member who can claim)
- Grid Card: Shows claim indicator or claimable state
- Detail Screen: Claim button
- Options Sheet: N/A (not owner)

## Special Item Types

### surprise_me
- Grid Card: Question mark icon, no image
- Detail Screen: Description text, no "Go to Store" button
- Claim UI: Hidden (not claimable)

### mystery_box
- Grid Card: Gift icon, tier price (€50 or €100)
- Detail Screen: Tier badge, no "Go to Store" button
- Claim UI: Hidden (not claimable)

## Split Contribution Mapping
Document how split-related props map to detail screen.

## Badge & Indicator Mapping
Document favorite badges, most wanted, claim status indicators.

## Requirements Traceability
- PARITY-01: All actions functional -> [list actions and destinations]
- PARITY-02: All badges display correctly -> [list badges and destinations]
- PARITY-03: Celebrant privacy rules -> [document isTaken vs claim visibility]
```

Analyze LuxuryWishlistCard.tsx thoroughly. The props interface shows:
- item, onDelete, onPriorityChange, index (core)
- favoriteGroups, onToggleFavorite, showFavoriteHeart, singleGroupName, totalUserGroups (favorites)
- claimable, onClaim, onUnclaim, claiming, claim, isYourClaim, isTaken, dimmed, isCelebrant (claims)
- splitStatus, contributors, userPledgeAmount, suggestedShare, onOpenSplit, onPledge, onCloseSplit (splits)

Also document internal logic:
- getCardIcon() - icon selection by item type
- getCardBorderColor() - border based on favorite/type
- getGradientColors() - accent bar colors
- formatPrice() - price display logic
  </action>
  <verify>
1. File exists: `ls -la .planning/phases/33-foundation-feature-inventory/FEATURE-INVENTORY.md`
2. Contains all 27+ props: `grep -c "^|" .planning/phases/33-foundation-feature-inventory/FEATURE-INVENTORY.md` should be > 30
3. Contains context sections: `grep -c "Context" .planning/phases/33-foundation-feature-inventory/FEATURE-INVENTORY.md` should be >= 4
4. Contains special item types: `grep "surprise_me\|mystery_box" .planning/phases/33-foundation-feature-inventory/FEATURE-INVENTORY.md`
5. Contains requirements traceability: `grep "PARITY-0" .planning/phases/33-foundation-feature-inventory/FEATURE-INVENTORY.md`
  </verify>
  <done>FEATURE-INVENTORY.md exists with complete prop mapping table (27+ rows), all 4 context sections documented, special item types covered, and PARITY requirements traced to destinations</done>
</task>

</tasks>

<verification>
Phase 33 Plan 01 is complete when:
1. expo-image is in package.json at version ~3.0.x
2. FEATURE-INVENTORY.md contains complete prop mapping
3. All view contexts (owner, celebrant, claimer, viewer) are documented
4. Special item types (surprise_me, mystery_box) have clear mapping
5. PARITY requirements are traced to specific destinations
</verification>

<success_criteria>
- `grep "expo-image" package.json` shows version ~3.0.x
- FEATURE-INVENTORY.md is >100 lines with structured prop mapping
- Every LuxuryWishlistCardProps interface prop has a documented destination
- Document covers claim flow, split flow, and special item types
</success_criteria>

<output>
After completion, create `.planning/phases/33-foundation-feature-inventory/33-01-SUMMARY.md`
</output>
