---
phase: 09-favorite-marking
plan: 04
type: execute
wave: 3
depends_on: ["09-02", "09-03"]
files_modified:
  - components/wishlist/FavoriteHeart.tsx
  - components/wishlist/LuxuryWishlistCard.tsx
  - components/wishlist/MostWantedBadge.tsx
  - components/wishlist/GroupPickerSheet.tsx
  - app/(app)/(tabs)/wishlist.tsx
  - app/(app)/celebration/[id].tsx
  - lib/favorites.ts
autonomous: false
gap_closure: true

must_haves:
  truths:
    - "Heart fill color is burgundy (same as outline border color)"
    - "Cards animate (slide) when favorite changes position"
    - "When user has 2+ groups, tapping heart opens group picker"
    - "Group picker shows all user's groups with checkboxes"
    - "Favorited card shows group name badge indicating which group(s)"
    - "Celebration view only shows Most Wanted if favorited for THAT group"
  artifacts:
    - path: "components/wishlist/GroupPickerSheet.tsx"
      provides: "Bottom sheet for selecting which group to favorite for"
      exports: ["GroupPickerSheet"]
    - path: "components/wishlist/MostWantedBadge.tsx"
      provides: "Badge showing group name when favorited"
      exports: ["MostWantedBadge"]
  key_links:
    - from: "app/(app)/(tabs)/wishlist.tsx"
      to: "components/wishlist/GroupPickerSheet.tsx"
      via: "opens picker when user has 2+ groups"
      pattern: "GroupPickerSheet"
---

<objective>
Redesign favorite marking to support multi-group scenarios with proper visual feedback.

**User Feedback:**
1. Heart fill color should be burgundy (same as outline) - NOT gold
2. Cards should animate (slide up/down) when favorite position changes
3. Multi-group support: If user belongs to 2+ groups, show picker to select which group
4. Show group name badge on favorited card to indicate which group it belongs to
5. Celebration view should only show "Most Wanted" for items favorited in THAT group

**Output:** Complete multi-group favorite system with visual polish.
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/09-favorite-marking/09-01-SUMMARY.md
@.planning/phases/09-favorite-marking/09-02-SUMMARY.md
@.planning/phases/09-favorite-marking/09-03-SUMMARY.md
@components/wishlist/FavoriteHeart.tsx
@components/wishlist/LuxuryWishlistCard.tsx
@components/wishlist/MostWantedBadge.tsx
@app/(app)/(tabs)/wishlist.tsx
@app/(app)/celebration/[id].tsx
@lib/favorites.ts
@constants/theme.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix heart fill color to burgundy</name>
  <files>components/wishlist/FavoriteHeart.tsx</files>
  <action>
Change the filled heart color from gold to burgundy:

**Current:**
```typescript
color={isFavorite ? colors.gold[500] : colors.burgundy[300]}
```

**Change to:**
```typescript
color={colors.burgundy[300]}
```

Both filled and outline hearts use the same burgundy color. The visual distinction is the icon itself (filled vs outline).
  </action>
  <verify>
1. File compiles: `npx tsc --noEmit components/wishlist/FavoriteHeart.tsx`
2. Heart uses burgundy color for both states
  </verify>
  <done>
- Heart fill color is burgundy[300] (same as outline)
- Visual distinction comes from filled vs outline icon only
  </done>
</task>

<task type="auto">
  <name>Task 2: Update favorites service for multi-group queries</name>
  <files>lib/favorites.ts</files>
  <action>
Add functions to support multi-group favorites:

**Add new function to get all user's groups:**
```typescript
/** Get all groups user belongs to */
export async function getUserGroups(userId: string): Promise<Array<{ id: string; name: string }>> {
  const { data, error } = await supabase
    .from('group_members')
    .select('group_id, groups!inner(id, name)')
    .eq('user_id', userId);

  if (error) {
    console.error('Failed to fetch user groups:', error);
    throw new Error(`Failed to fetch user groups: ${error.message}`);
  }

  return (data || []).map(d => ({
    id: d.groups.id,
    name: d.groups.name,
  }));
}
```

**Add function to get all favorites for a user across all groups:**
```typescript
/** Get all favorites for a user across all groups (for My Wishlist view) */
export async function getAllFavoritesForUser(userId: string): Promise<Array<{ groupId: string; groupName: string; itemId: string }>> {
  const { data, error } = await supabase
    .from('group_favorites')
    .select('group_id, item_id, groups!inner(name)')
    .eq('user_id', userId);

  if (error) {
    console.error('Failed to fetch user favorites:', error);
    throw new Error(`Failed to fetch user favorites: ${error.message}`);
  }

  return (data || []).map(d => ({
    groupId: d.group_id,
    groupName: d.groups.name,
    itemId: d.item_id,
  }));
}
```

These enable:
- Showing which group(s) each item is favorited for
- Checking if user needs group picker (2+ groups)
  </action>
  <verify>
1. TypeScript compiles: `npx tsc --noEmit lib/favorites.ts`
2. Both new functions are exported
  </verify>
  <done>
- getUserGroups returns all user's groups with id and name
- getAllFavoritesForUser returns all favorites with group info
- Enables multi-group favorite display
  </done>
</task>

<task type="auto">
  <name>Task 3: Create GroupPickerSheet component</name>
  <files>components/wishlist/GroupPickerSheet.tsx</files>
  <action>
Create a bottom sheet for selecting which group to favorite an item for:

```typescript
import { View, Text, TouchableOpacity, Modal, Pressable, ScrollView } from 'react-native';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import { MotiView } from 'moti';
import { colors, spacing, borderRadius, shadows } from '../../constants/theme';

interface GroupPickerSheetProps {
  visible: boolean;
  onClose: () => void;
  groups: Array<{ id: string; name: string }>;
  currentFavoriteGroups: string[]; // Groups where this item is currently favorited
  onToggleGroup: (groupId: string) => void;
  itemTitle: string;
}

export function GroupPickerSheet({
  visible,
  onClose,
  groups,
  currentFavoriteGroups,
  onToggleGroup,
  itemTitle,
}: GroupPickerSheetProps) {
  return (
    <Modal
      visible={visible}
      animationType="slide"
      presentationStyle="pageSheet"
      onRequestClose={onClose}
    >
      <View style={{
        flex: 1,
        backgroundColor: colors.cream[50],
      }}>
        {/* Header */}
        <View style={{
          flexDirection: 'row',
          justifyContent: 'space-between',
          alignItems: 'center',
          padding: spacing.lg,
          borderBottomWidth: 1,
          borderBottomColor: colors.gold[100],
          backgroundColor: colors.white,
        }}>
          <View style={{ flex: 1 }}>
            <Text style={{
              fontSize: 18,
              fontWeight: '600',
              color: colors.burgundy[900],
            }}>
              Mark as Most Wanted
            </Text>
            <Text style={{
              fontSize: 14,
              color: colors.burgundy[400],
              marginTop: 4,
            }} numberOfLines={1}>
              {itemTitle}
            </Text>
          </View>
          <TouchableOpacity onPress={onClose}>
            <MaterialCommunityIcons name="close" size={24} color={colors.burgundy[400]} />
          </TouchableOpacity>
        </View>

        {/* Instructions */}
        <Text style={{
          fontSize: 14,
          color: colors.burgundy[500],
          padding: spacing.lg,
          paddingBottom: spacing.sm,
        }}>
          Select which group(s) this item is your "Most Wanted" for:
        </Text>

        {/* Group List */}
        <ScrollView style={{ flex: 1, padding: spacing.lg, paddingTop: 0 }}>
          {groups.map(group => {
            const isSelected = currentFavoriteGroups.includes(group.id);
            return (
              <TouchableOpacity
                key={group.id}
                onPress={() => onToggleGroup(group.id)}
                style={{
                  flexDirection: 'row',
                  alignItems: 'center',
                  padding: spacing.md,
                  marginBottom: spacing.sm,
                  backgroundColor: colors.white,
                  borderRadius: borderRadius.md,
                  borderWidth: 2,
                  borderColor: isSelected ? colors.burgundy[400] : colors.gold[100],
                  ...shadows.sm,
                }}
              >
                <View style={{
                  width: 24,
                  height: 24,
                  borderRadius: 4,
                  borderWidth: 2,
                  borderColor: isSelected ? colors.burgundy[400] : colors.burgundy[200],
                  backgroundColor: isSelected ? colors.burgundy[400] : 'transparent',
                  alignItems: 'center',
                  justifyContent: 'center',
                  marginRight: spacing.md,
                }}>
                  {isSelected && (
                    <MaterialCommunityIcons name="check" size={16} color={colors.white} />
                  )}
                </View>
                <View style={{ flex: 1 }}>
                  <Text style={{
                    fontSize: 16,
                    fontWeight: '600',
                    color: colors.burgundy[800],
                  }}>
                    {group.name}
                  </Text>
                </View>
                {isSelected && (
                  <MaterialCommunityIcons
                    name="heart"
                    size={20}
                    color={colors.burgundy[400]}
                  />
                )}
              </TouchableOpacity>
            );
          })}
        </ScrollView>

        {/* Done Button */}
        <View style={{
          padding: spacing.lg,
          backgroundColor: colors.white,
          borderTopWidth: 1,
          borderTopColor: colors.gold[100],
        }}>
          <TouchableOpacity
            onPress={onClose}
            style={{
              backgroundColor: colors.burgundy[700],
              borderRadius: borderRadius.md,
              padding: spacing.md,
              alignItems: 'center',
            }}
          >
            <Text style={{
              color: colors.white,
              fontSize: 16,
              fontWeight: '600',
            }}>
              Done
            </Text>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
}

export default GroupPickerSheet;
```

The picker:
- Shows all user's groups with checkboxes
- Highlights groups where item is already favorited
- Allows toggling favorites per group
- Uses burgundy accent color throughout
  </action>
  <verify>
1. File exists at components/wishlist/GroupPickerSheet.tsx
2. TypeScript compiles: `npx tsc --noEmit components/wishlist/GroupPickerSheet.tsx`
3. Component is exported
  </verify>
  <done>
- GroupPickerSheet displays all user groups
- Checkboxes show current favorite status per group
- Toggle function called on tap
- Done button closes sheet
  </done>
</task>

<task type="auto">
  <name>Task 4: Update MostWantedBadge to show group name</name>
  <files>components/wishlist/MostWantedBadge.tsx</files>
  <action>
Update badge to optionally display group name:

```typescript
import { View, Text } from 'react-native';
import { colors, spacing, borderRadius } from '../../constants/theme';

interface MostWantedBadgeProps {
  groupName?: string; // Optional: show "MOST WANTED in [Group]"
}

export function MostWantedBadge({ groupName }: MostWantedBadgeProps) {
  return (
    <View
      style={{
        backgroundColor: colors.burgundy[100],
        paddingHorizontal: spacing.sm,
        paddingVertical: spacing.xs / 2,
        borderRadius: borderRadius.sm,
        alignSelf: 'flex-start',
        marginBottom: spacing.xs,
      }}
    >
      <Text
        style={{
          color: colors.burgundy[700],
          fontSize: 11,
          fontWeight: '600',
          letterSpacing: 0.3,
        }}
        numberOfLines={1}
      >
        {groupName ? `♥ MOST WANTED in ${groupName}` : '♥ MOST WANTED'}
      </Text>
    </View>
  );
}

export default MostWantedBadge;
```

Changes:
- Now accepts optional `groupName` prop
- When provided, shows "♥ MOST WANTED in [Group Name]"
- When not provided (celebration view where group is implied), shows just "♥ MOST WANTED"
- Changed from gold to burgundy accent (matching heart color)
  </action>
  <verify>
1. TypeScript compiles: `npx tsc --noEmit components/wishlist/MostWantedBadge.tsx`
2. Component accepts optional groupName prop
  </verify>
  <done>
- Badge shows group name when provided
- Uses burgundy accent (consistent with heart)
- Heart symbol added for visual connection
  </done>
</task>

<task type="auto">
  <name>Task 5: Update LuxuryWishlistCard for multi-group badges and animation</name>
  <files>components/wishlist/LuxuryWishlistCard.tsx</files>
  <action>
Update the card component to:
1. Support multiple group badges
2. Use burgundy border for favorites (not gold)
3. Enable LayoutAnimation for smooth reordering

**1. Update props interface:**
```typescript
interface LuxuryWishlistCardProps {
  item: WishlistItem;
  onDelete?: (id: string) => void;
  index: number;
  favoriteGroups?: Array<{ groupId: string; groupName: string }>; // NEW: groups where this is favorited
  onToggleFavorite?: () => void;
  showFavoriteHeart?: boolean;
  singleGroupName?: string; // NEW: for celebration view where only one group matters
}
```

**2. Update getCardBorderColor:**
```typescript
const getCardBorderColor = () => {
  // Favorite items get burgundy border
  const isFavorite = (favoriteGroups && favoriteGroups.length > 0) || singleGroupName;
  if (isFavorite && !isSpecialItem) {
    return colors.burgundy[300];
  }

  switch (item.item_type) {
    case 'surprise_me':
      return colors.burgundy[200];
    case 'mystery_box':
      return colors.gold[300];
    default:
      return colors.gold[100];
  }
};
```

**3. Update badge rendering:**
Replace the single MostWantedBadge with support for multiple:
```tsx
{/* Most Wanted badges - show one per group */}
{singleGroupName && <MostWantedBadge />}
{!singleGroupName && favoriteGroups && favoriteGroups.length > 0 && (
  favoriteGroups.map(fg => (
    <MostWantedBadge key={fg.groupId} groupName={fg.groupName} />
  ))
)}
```

**4. Update isFavorite checks:**
Replace `isFavorite` boolean checks with:
```typescript
const isFavorite = (favoriteGroups && favoriteGroups.length > 0) || !!singleGroupName;
```

**5. Update borderWidth:**
```typescript
borderWidth: isFavorite ? 2 : 1,
```
  </action>
  <verify>
1. TypeScript compiles: `npx tsc --noEmit components/wishlist/LuxuryWishlistCard.tsx`
2. Props include favoriteGroups and singleGroupName
3. Multiple badges render when favorited for multiple groups
4. Border color is burgundy for favorites
  </verify>
  <done>
- Card supports multiple favorite group badges
- Border color changed to burgundy for favorites
- Props updated for multi-group support
- Backwards compatible with single group (celebration view)
  </done>
</task>

<task type="auto">
  <name>Task 6: Wire multi-group favorites into My Wishlist screen</name>
  <files>app/(app)/(tabs)/wishlist.tsx</files>
  <action>
Major update to support multi-group favorites:

**1. Add imports:**
```typescript
import { LayoutAnimation, UIManager, Platform } from 'react-native';
import { getUserGroups, getAllFavoritesForUser, setFavorite, removeFavorite } from '../../../lib/favorites';
import { GroupPickerSheet } from '../../../components/wishlist/GroupPickerSheet';

// Enable LayoutAnimation on Android
if (Platform.OS === 'android' && UIManager.setLayoutAnimationEnabledExperimental) {
  UIManager.setLayoutAnimationEnabledExperimental(true);
}
```

**2. Update state:**
```typescript
const [userGroups, setUserGroups] = useState<Array<{ id: string; name: string }>>([]);
const [favorites, setFavorites] = useState<Array<{ groupId: string; groupName: string; itemId: string }>>([]);
const [pickerVisible, setPickerVisible] = useState(false);
const [selectedItemForPicker, setSelectedItemForPicker] = useState<WishlistItem | null>(null);
```

Remove old state: `favoriteItemId`, `activeGroupId`

**3. Update getCurrentUser to load groups and all favorites:**
```typescript
const getCurrentUser = async () => {
  const { data: { user } } = await supabase.auth.getUser();
  setUserId(user?.id || null);

  if (user) {
    // Load user's groups
    const groups = await getUserGroups(user.id);
    setUserGroups(groups);

    // Load all favorites across all groups
    const allFavs = await getAllFavoritesForUser(user.id);
    setFavorites(allFavs);
  }
};
```

**4. Create handleHeartPress:**
```typescript
const handleHeartPress = (item: WishlistItem) => {
  if (userGroups.length === 0) {
    Alert.alert('No Groups', 'Join a group to mark favorites');
    return;
  }

  if (userGroups.length === 1) {
    // Single group: toggle directly
    handleToggleFavorite(item.id, userGroups[0].id);
  } else {
    // Multiple groups: show picker
    setSelectedItemForPicker(item);
    setPickerVisible(true);
  }
};
```

**5. Update handleToggleFavorite:**
```typescript
const handleToggleFavorite = async (itemId: string, groupId: string) => {
  if (!userId) return;

  const existingFav = favorites.find(f => f.groupId === groupId && f.itemId === itemId);
  const group = userGroups.find(g => g.id === groupId);

  // Animate list reordering
  LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);

  // Optimistic update
  if (existingFav) {
    // Remove favorite
    setFavorites(favorites.filter(f => !(f.groupId === groupId && f.itemId === itemId)));
  } else {
    // Add favorite (replace any existing for this group)
    setFavorites([
      ...favorites.filter(f => f.groupId !== groupId),
      { groupId, groupName: group?.name || '', itemId },
    ]);
  }

  try {
    if (existingFav) {
      await removeFavorite(userId, groupId);
    } else {
      await setFavorite(userId, groupId, itemId);
    }
  } catch (error) {
    console.error('Failed to toggle favorite:', error);
    // Reload favorites on error
    const allFavs = await getAllFavoritesForUser(userId);
    setFavorites(allFavs);
    Alert.alert('Error', 'Failed to update favorite');
  }
};
```

**6. Update sorting logic:**
```typescript
// Sort items: favorited items first (any group), then by priority
const sortedItems = [...items].sort((a, b) => {
  const aFavorited = favorites.some(f => f.itemId === a.id);
  const bFavorited = favorites.some(f => f.itemId === b.id);
  if (aFavorited && !bFavorited) return -1;
  if (!aFavorited && bFavorited) return 1;
  return (b.priority || 0) - (a.priority || 0);
});
```

**7. Update LuxuryWishlistCard usage:**
```tsx
{sortedItems.map((item, index) => {
  const itemFavorites = favorites
    .filter(f => f.itemId === item.id)
    .map(f => ({ groupId: f.groupId, groupName: f.groupName }));

  return (
    <LuxuryWishlistCard
      key={item.id}
      item={item}
      onDelete={handleDeleteItem}
      index={index}
      favoriteGroups={itemFavorites}
      onToggleFavorite={() => handleHeartPress(item)}
      showFavoriteHeart={true}
    />
  );
})}
```

**8. Add GroupPickerSheet:**
```tsx
<GroupPickerSheet
  visible={pickerVisible}
  onClose={() => {
    setPickerVisible(false);
    setSelectedItemForPicker(null);
  }}
  groups={userGroups}
  currentFavoriteGroups={
    selectedItemForPicker
      ? favorites.filter(f => f.itemId === selectedItemForPicker.id).map(f => f.groupId)
      : []
  }
  onToggleGroup={(groupId) => {
    if (selectedItemForPicker) {
      handleToggleFavorite(selectedItemForPicker.id, groupId);
    }
  }}
  itemTitle={selectedItemForPicker?.title || ''}
/>
```

**9. Update handleRefresh:**
```typescript
const handleRefresh = async () => {
  setRefreshing(true);
  await fetchWishlistItems();
  if (userId) {
    const allFavs = await getAllFavoritesForUser(userId);
    setFavorites(allFavs);
  }
  setRefreshing(false);
};
```
  </action>
  <verify>
1. TypeScript compiles: `npx tsc --noEmit app/\(app\)/\(tabs\)/wishlist.tsx`
2. GroupPickerSheet is rendered
3. LayoutAnimation imported and enabled
4. Favorites stored per-group
5. Heart tap shows picker when user has 2+ groups
  </verify>
  <done>
- Multi-group favorites fully supported
- LayoutAnimation enables smooth card sliding
- GroupPickerSheet shows for multi-group users
- Single group users get direct toggle (no picker)
- Cards show all group badges where favorited
  </done>
</task>

<task type="auto">
  <name>Task 7: Update celebration view for group-specific favorites</name>
  <files>app/(app)/celebration/[id].tsx</files>
  <action>
The celebration view should only show "Most Wanted" if the item is favorited for THIS specific group.

**Current implementation already does this correctly:**
- `getFavoriteForGroup(celebration.celebrant_id, celebration.group_id)` fetches favorite for the specific group
- `isFavorite={item.id === celebrantFavoriteId}` checks against that specific group's favorite

**Updates needed:**
1. Change LuxuryWishlistCard prop from `isFavorite` to `singleGroupName`:

```tsx
<LuxuryWishlistCard
  key={item.id}
  item={item}
  index={index}
  singleGroupName={item.id === celebrantFavoriteId ? undefined : undefined}
  showFavoriteHeart={false}
/>
```

Actually, we need to pass it differently. For celebration view:
- Don't show group name (group is already clear from context)
- Just show "MOST WANTED" badge without group name

Update the card usage:
```tsx
{sortedCelebrantItems.map((item, index) => (
  <LuxuryWishlistCard
    key={item.id}
    item={item}
    index={index}
    favoriteGroups={item.id === celebrantFavoriteId ? [{ groupId: celebration.group_id, groupName: '' }] : []}
    showFavoriteHeart={false}
  />
))}
```

Since we're passing an empty groupName, the badge will show just "♥ MOST WANTED" without the group suffix.
  </action>
  <verify>
1. TypeScript compiles: `npx tsc --noEmit app/\(app\)/celebration/\[id\].tsx`
2. LuxuryWishlistCard uses favoriteGroups prop
3. Favorite only shows for items favorited for THIS celebration's group
  </verify>
  <done>
- Celebration view respects group-specific favorites
- Only shows Most Wanted badge if favorited for this group
- Badge shows without group name (group is contextually obvious)
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete multi-group favorite redesign:

1. **Heart color**: Now burgundy (same as outline border) - NOT gold
2. **Card animation**: LayoutAnimation enables smooth sliding when favorite changes position
3. **Multi-group picker**: When user has 2+ groups, tapping heart opens picker to select which group(s)
4. **Group badges**: Favorited cards show "♥ MOST WANTED in [Group Name]" for each group
5. **Celebration view**: Only shows Most Wanted if item is favorited for THAT specific group
  </what-built>
  <how-to-verify>
**Test 1: Heart color**
1. Open My Wishlist
2. Tap a heart to favorite an item
3. Verify the filled heart is BURGUNDY (same color as unfilled hearts) - NOT gold

**Test 2: Card animation**
1. Have at least 2 items in your wishlist
2. Favorite an item that is NOT at the top
3. Watch the card smoothly slide up to the top
4. Other cards should slide down smoothly

**Test 3: Single group user (direct toggle)**
1. If you only belong to 1 group:
2. Tap heart → item should favorite immediately for that group
3. Badge should show "♥ MOST WANTED in [Group Name]"

**Test 4: Multi-group user (picker)**
1. If you belong to 2+ groups:
2. Tap a heart icon
3. A bottom sheet should appear with all your groups
4. Each group has a checkbox
5. Tap a group to toggle favorite for that group
6. Tap "Done" to close
7. Card should show badges for each group where favorited

**Test 5: Multiple groups favorited**
1. Favorite the same item for 2+ groups
2. Card should show multiple "♥ MOST WANTED in [Group]" badges stacked

**Test 6: Celebration view**
1. Open a celebration where you are NOT the celebrant
2. Look at "Celebrant's Wishlist" section
3. If celebrant has a favorite for THIS group, it should:
   - Show "♥ MOST WANTED" badge (without group name since group is obvious)
   - Have burgundy border
   - Be pinned to top
4. If celebrant favorited item for a DIFFERENT group, it should NOT show as Most Wanted here

**Test 7: Persistence**
1. Pull to refresh - favorites should persist
2. Close and reopen app - favorites should persist
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete and checkpoint approved:
1. Heart fill color is burgundy (not gold)
2. Cards animate smoothly when reordering
3. Multi-group picker works for users with 2+ groups
4. Single-group users get direct toggle (no picker)
5. Badge shows group name(s) on My Wishlist
6. Celebration view respects group-specific favorites
</verification>

<success_criteria>
- Heart color matches user feedback (burgundy)
- Animation provides smooth visual feedback on reorder
- Multi-group support enables per-group favorites
- Visual indicator shows which group(s) item is favorited for
- Celebration view only shows favorites for THAT group
- User approves all behaviors in checkpoint
</success_criteria>

<output>
After completion, create `.planning/phases/09-favorite-marking/09-04-SUMMARY.md`
</output>
