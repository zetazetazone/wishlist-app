---
phase: 36-options-sheet-polish
plan: 03
type: execute
wave: 3
depends_on: ["36-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All 7 OPTIONS requirements verified working"
    - "Existing wishlist functionality not regressed"
    - "Options sheet opens from grid and detail page"
    - "All actions (favorite, priority, share, edit, delete) function correctly"
  artifacts: []
  key_links: []
---

<objective>
Final verification and regression testing of Options Sheet and full wishlist flow.

Purpose: Ensure Phase 36 success criteria are met and existing functionality is preserved.
Output: Verified working Options Sheet with full regression test completion.
</objective>

<execution_context>
@/home/zetaz/.claude/get-shit-done/workflows/execute-plan.md
@/home/zetaz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/36-options-sheet-polish/36-01-PLAN.md
@.planning/phases/36-options-sheet-polish/36-02-PLAN.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify Options Sheet from Grid</name>
  <what-built>
Options Sheet accessible from grid card action button on My Wishlist tab with all actions functioning.
  </what-built>
  <how-to-verify>
1. Open app and navigate to My Wishlist tab
2. Find a standard wishlist item with an image
3. Tap the action button (three dots) on bottom-right of the grid card image
4. **Verify sheet opens** with:
   - Item preview: image thumbnail, title (2 lines max), price
   - Priority stars (interactive)
   - 4 action buttons: Favorite, Share, Edit, Delete

5. **Test Priority**: Tap a different star rating
   - Stars should update immediately in sheet
   - Close sheet, verify item card shows new priority (if displayed)

6. **Test Favorite**: Tap "Mark as Most Wanted" (or heart button)
   - Should open GroupPickerSheet to select which group
   - Select a group, verify selection saves
   - Re-open options sheet, should show "Remove Most Wanted"

7. **Test Share**: Tap Share button
   - Native share dialog should open with item title (and URL if exists)
   - Cancel share, verify sheet still open

8. **Test Edit**: Tap Edit button
   - Should show alert "Feature coming soon" (edit form not implemented)
   - Tap OK to dismiss

9. **Test Delete**: Tap Delete button
   - Should show confirmation alert
   - Tap Cancel, verify sheet still open and item still exists
   - Tap Delete again, confirm
   - Item should be removed from grid
  </how-to-verify>
  <resume-signal>
Type "grid-verified" if all checks pass, or describe specific issues found.
  </resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify Options Sheet from Detail Page</name>
  <what-built>
Options Sheet accessible from detail page header for owner view.
  </what-built>
  <how-to-verify>
1. Navigate to My Wishlist tab
2. Tap on a grid card to open item detail page
3. Verify you're the owner (no claim UI shown)
4. Tap the options button (three dots) in top-right header
5. **Verify sheet opens** with same preview and actions as grid test

6. **Test Priority**: Change star rating
   - Should update immediately
   - Note: priority stars in item info section should also update (if shown)

7. **Test Favorite**: Tap favorite button
   - Should show alert directing to My Wishlist tab
   - (Full GroupPickerSheet requires context not available in detail view)

8. **Test Share**: Tap Share
   - Native share dialog opens
   - Works same as from grid

9. **Test Delete**: Tap Delete, confirm
   - Item deleted
   - **Auto-navigates back** to My Wishlist tab
   - Item no longer in grid
  </how-to-verify>
  <resume-signal>
Type "detail-verified" if all checks pass, or describe specific issues found.
  </resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Regression Test: Core Wishlist Functionality</name>
  <what-built>
All existing wishlist functionality should work as before Phase 36.
  </what-built>
  <how-to-verify>
**My Wishlist Tab:**
- [ ] Grid displays items in 2 columns
- [ ] Grid cards show image/placeholder, title, price
- [ ] Pull-to-refresh reloads items
- [ ] FAB (floating add button) opens add item modal
- [ ] Adding item via modal works
- [ ] Tapping grid card navigates to detail page
- [ ] Special items (Surprise Me, Mystery Box) display correctly with icons

**Detail Page:**
- [ ] Hero image displays full-bleed
- [ ] Item info shows title, brand (if parsed), price, priority stars
- [ ] "Go to Store" button opens URL (for items with URL)
- [ ] Back button navigates back to list
- [ ] Non-owner views show appropriate claim UI (test from celebration page)

**Favorites/Most Wanted:**
- [ ] Heart press on card opens GroupPickerSheet
- [ ] Selecting group marks item as Most Wanted
- [ ] Favorited items show correctly in grid
- [ ] Special items can be favorited in multiple groups (checkboxes)
- [ ] Standard items limited to one group (radio buttons)

**Celebration Page (if accessible):**
- [ ] Grid displays celebrant's items
- [ ] Tapping card navigates to detail with celebrationId context
- [ ] Claim UI works for non-celebrant viewers
- [ ] Celebrant sees "Taken" badge without claimer identity
  </how-to-verify>
  <resume-signal>
Type "regression-passed" if all existing functionality works, or list specific regressions found.
  </resume-signal>
</task>

</tasks>

<verification>
All 3 checkpoints passed:
1. Options Sheet works from grid (grid-verified)
2. Options Sheet works from detail page (detail-verified)
3. No regressions in existing functionality (regression-passed)
</verification>

<success_criteria>
Phase 36 complete when:
- OPTIONS-01: Options sheet opens via action button on grid card (owner) and detail page - VERIFIED
- OPTIONS-02: Options sheet shows item preview (image, title, price) - VERIFIED
- OPTIONS-03: Options sheet provides favorite toggle action - VERIFIED
- OPTIONS-04: Options sheet provides priority (star rating) adjustment - VERIFIED
- OPTIONS-05: Options sheet provides share action - VERIFIED
- OPTIONS-06: Options sheet provides edit action (shows coming soon alert) - VERIFIED
- OPTIONS-07: Options sheet provides delete action with confirmation - VERIFIED
- Regression test: All existing wishlist functionality working - VERIFIED
</success_criteria>

<output>
After completion, create `.planning/phases/36-options-sheet-polish/36-03-SUMMARY.md`
</output>
